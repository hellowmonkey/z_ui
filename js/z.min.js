!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:window.z=t(jQuery)}(function($,undefined){function swipe(t,e,n){var i=0,a=0,o=event,s=!1,r=null;e.on("touchstart",function(t){_prevent(t),o=t.originalEvent.touches[0],i=o.clientX,a=o.clientY,s=!0,r=setTimeout(function(){s=!1},z.transTime)}),e.on("touchend",function(e){_prevent(e),o=e.originalEvent.changedTouches[0];var l="left"===t?i-o.clientX:o.clientX-i;l>50&&Math.abs(a-o.clientY)<50&&(n&&s&&n(e),r&&clearTimeout(r))})}function include(t,e,n){function i(){if(r<e.length){var n=e[r];if(_getZsrc(n))return void a();n.substr(-s.length)!==s&&(n+=s),-1===n.indexOf("://")&&(n=z.rootPath+n),"js"===t?(o=d.createElement("script"),o.src=n):"css"===t&&(o=d.createElement("link"),o.rel="stylesheet",o.href=n),d.head.appendChild(o),o.onload=function(){a()}}}function a(){r===e.length-1?n&&n():(r++,i())}if(e&&("string"===$.type(e)&&(e=[e]),"array"===$.type(e))){var o,s="."+t,r=0;return i(),o}}function getOpenHtml(t,e,n){for(var i=['<div class="z-modal z-move z-modal-sm '+z.animCls+" "+_getAnim()+'">','<div class="z-modal-header z-move-title z-action-move">','<button type="button" class="z-close z-action-close">&times;</button>','<h4 class="z-modal-title">'+e+"</h4>","</div>",'<div class="z-modal-body">',t,"</div>",'<div class="z-modal-footer z-text-center">'],a=0;a<n.length;a++)n[a].length&&i.push('<button type="button" class="z-btn z-btn-'+z.color[a]+'">'+n[a]+"</button>");return i.push("</div></div>"),$(i.join(""))}function getToastHtml(t,e){var n=$(".z-alert-box");e=e||z.color[3],t=t||"",n&&n.length||(n=$('<div class="z-alert-box"></div>'),$(_b).append(n)),n.css("zIndex",z.zIndex()),htmls=['<div class="z-alert z-alert-'+e+" z-alert-dismissible "+z.anims[4]+" "+z.animCls+'">','<button type="button" class="z-close z-action-close">&times;</button>',t,"</div>"];var i=$(htmls.join(""));return n.prepend(i),setTimeout(function(){_doClose(i)},z.delayTime),i}function appendOpen(t,e,n){$.createShade(function(){$(_b).append(t),t.css("zIndex",z.zIndex()).show();var i=t.innerWidth(),a=t.innerHeight(),o=winWidth,s=winHeight;t.css({margin:0,top:n&&n[0]?n[0]:(s-a)/3>0?(s-a)/3:0,left:n&&n[1]?n[1]:(o-i)/2>0?(o-i)/2:0}),_modalHeight(t),t.find(".z-modal-footer .z-btn").on(_ck,function(){e&&e($(this).index())})}),$(w).on("keyup",function(e){27==e.which&&_doClose(t)})}function tabs(t){var e=z.active,n=$(t),i=n.parent().find("li"),a=n.parents(".z-tab").find(".z-tab-content>.z-tab-item"),o=n.index();n.hasClass(e)||(i.removeClass(e),n.addClass(e),a.hide().eq(o).show())}function _getZsrc(t){for(var e=d.getElementsByTagName("script"),n=/[\\\/]z\.(min\.)?js/,i=0;i<e.length;i++){var a=e[i].src;if(t){if(-1!==a.indexOf(t))return!0}else if(a.match(n))return a.replace(/z\.(min\.)?js/,"")}return!1}function _getAnim(){var t=z.anims;return t[Math.floor(Math.random()*t.length)]}function _doClose(t,e,n,i){function a(){!t.hasClass(zBoxs[0].cls.replace(".",""))&&$.closeShade(o),n&&t.remove(),e&&e()}var i=i||t,o=z.closeTime;_bool(n,!0)&&(n=!0),n=_bool(n),n?i.flyOut(o,a):t.slideUp(o,a)}function _mousePosition(t){return{top:t.clientY,left:t.clientX}}function _getOpts(t,e,n){var i=e;return n&&(i=$.extend({},e,n)),$.each(i,function(e){_bool(t.zdata(e),!0)||(i[e]=t.zdata(e))}),i}function _bool(t,e){var n="undefined"===$.type(t);return e?n:n?!1:"boolean"===$.type(t)?t:"false"==t?!1:!0}function _modalHeight(t){var e=t.children(".z-modal-header"),n=t.children(".z-modal-body"),i=t.children(".z-modal-footer");n.css("maxHeight",winHeight-e.innerHeight()-i.innerHeight()-30)}function _scroll(t,e){var n;e=e||$(d),e.on("scroll",function(){clearTimeout(n),n=setTimeout(t,60)})}function _prevent(t,e){var n=t||event;return n.stopPropagation(),e&&n.preventDefault(),n}var w=window,d=document,log=console.log,_ck="click",_b="body",winWidth=$(w).innerWidth(),winHeight=$(w).innerHeight(),transTime=200,rootPath=_getZsrc(),libsPath=rootPath.replace("js/","")+"libs/",isMobile=function(){return navigator.userAgent.match(/mobile/i)}(),dateNow=new Date,zShade=null,zShades=0,zBoxs=[{cls:".z-alert"},{cls:".z-modal"},{cls:".z-album",ani:!0}],progressTimer=null,aniBoxTops=[],z={version:"2.0.0",rootPath:rootPath,libsPath:libsPath,index:99,zIndex:function(){return++this.index},anims:["z-anim-upbit","z-anim-scale","z-anim-scaleSpring","z-anim-up","z-anim-downbit"],animCls:"z-anim-ms3",libs:{form:libsPath+"jquery.form.min",waterfall:libsPath+"masonry-docs.min",jscrollpane:libsPath+"jquery.jscrollpane.min",datepicker:libsPath+"bootstrap-datetimepicker.min"},title:{alert:"警告框",confirm:"询问框",prompt:"输入框",open:"提示窗体"},btns:["取消","确认"],color:["default","blue","yellow","red","dark","green"],isMobile:isMobile,transTime:transTime,closeTime:.6*transTime,successTime:8*transTime,delayTime:4e3,active:"z-active",disabled:"z-disabled",overflow:"z-overflow",dt:dateNow,loadingHtml:'<span class="z-anim-rotate z-icon">&#xe624;</span>',sliderBtn:'<button class="z-slider-btn z-icon z-slider-prev">&#xe605;</button><button class="z-slider-btn z-icon z-slider-next">&#xe61d;</button>',winWidth:winWidth,winHeight:winHeight},sliderLeftCls=function(){return $(z.sliderBtn)[0].className}();return $.createShade=function(t,e,n){return zShade?t&&t():(zShade=$('<div class="z-shade" style="z-index:'+z.zIndex()+";"+function(){return _bool(n)?"opacity:"+n:""}()+'"></div>'),$(_b).addClass(z.overflow),isMobile||$(_b).css("paddingRight","8px"),$(_b).append(zShade),zShade.fadeIn(z.transTime,t&&t)),++zShades,zShade.on(_ck,function(){e&&e()&&$.closeShade()}),zShade},$.closeShade=function(t,e,n){return zShade?(n&&(zShades=0),--zShades,void(0>=zShades&&(zShades=0,"function"===$.type(t)&&(e=t,t=z.transTime),t=t||z.transTime,zShade.fadeOut(t,function(){zShade.remove(),$(_b).removeClass(z.overflow).css("paddingRight",""),zShade=null,e&&e()})))):!1},$.resetForm=function(t){function e(t){t.length&&t.each(function(t){var e=this.checked,n=this.name,i=n+t.toString(),a=this.type;if(_bool($(this).zdata("noreform")))return $(this).show(),!0;if(_bool($(this).zdata("name"),!0)){var o='<div class="z-unselect z-form-'+a+function(){return e?" "+z.active:""}()+'" zdata-id="'+i+'" zdata-name="'+n+'"><i class="z-anim z-icon">'+function(){return"radio"==a?"&#xe998;":"&#xe615;"}()+"</i><span>"+this.title+"</span></div>";$(this).zdata("id",i),$(this).after(o)}})}_bool(t,!0)?e($('.z-form input[type="radio"],.z-form input[type="checkbox"]')):(!t instanceof $&&(t=$(t)),e(t))},$.submit=function(ele,cb,tip){function doing(){form.find("fieldset").length||form.wrapInner("<fieldset></fieldset>");var fieldset=form.find("fieldset");if(fieldset.attr("disabled"))return!1;if(fieldset.attr("disabled",!0),_bool(tip)){$(".z-msg").remove();var html=$('<div class="z-msg" style="z-index:'+z.zIndex()+'">'+tip+"</div>");$(_b).append(html),html.css({marginTop:-html.innerHeight()/2,marginLeft:-html.innerWidth()/2})}form.ajaxForm(),form.ajaxSubmit({success:function(responseText,statusText,xhr,$form){if("success"==statusText){var ret=responseText;fieldset.removeAttr("disabled"),tip&&html.remove(),likeObject(ret)&&(w.JSON?ret=JSON.parse(responseText):eval("ret = "+responseText)),cb(ret)}}})}function likeObject(t){return"string"!==$.type(t)?!1:(t=t.replace(/\s/g,"").replace(/\n|\r/,""),/^\{(.*?)\}$/.test(t)?/"(.*?)":(.*?)/g.test(t):!1)}var form=ele instanceof $?ele:$(ele),datatip=form.zdata("tip"),notdatatip=_bool(datatip,!0);return tip=_bool(tip,!0)&&notdatatip?"数据提交中...":notdatatip?tip:datatip,form&&form.length&&form.attr("action")?void($.fn.ajaxSubmit?doing():$.loadJs(z.libs.form,doing)):!1},$.date=function(t,e){var n=dateNow,i="yyyy/MM/dd H:mm",a=n.getTime(),o=!1;"date"===$.type(t)||"number"===$.type(t)?(e=t,t=i):_bool(t,!0)&&(t=i,e=a),_bool(e,!0)?e=a:"string"===$.type(e)?e=parseInt(e):"date"===$.type(e)&&(n=e,o=!0),o||(n=new Date(e));var s=n.getFullYear(),r=n.getMonth(),l=n.getDate(),d=n.getHours(),c=n.getMinutes(),u=n.getSeconds(),f=n.getMilliseconds(),h=n.getTimezoneOffset(),m=n.getDay(),p=["日","一","二","三","四","五","六"],z=d>12?d-12:d,v={"y+":s,"M+":r+1,"d+":l,"H+":d,"h+":0==z?12:z,"m+":c,"s+":u,ms:f,"a+":d>12||0==d?"PM":"AM","w+":m,"W+":p[m],"q+":Math.floor((c+3)/3),"z+":h};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var g in v)new RegExp("("+g+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?v[g]:("00"+v[g]).substr((""+v[g]).length)));return t},$.getFileUrl=function(t){function e(t){var e=null;return w.createObjectURL!=undefined?e=w.createObjectURL(t):w.URL!=undefined?e=w.URL.createObjectURL(t):w.webkitURL!=undefined&&(e=w.webkitURL.createObjectURL(t)),e}var n=[],i=t.files;return i&&i.length?($.each(i,function(t,i){n.push(e(i))}),n.length>1?n:n[0]):void 0},$.supportCss3=function(t){var e,n=["webkit","Moz","ms","o"],i=[],a=d.documentElement.style,o=function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})};t=t||"animation";for(e in n)i.push(o(n[e]+"-"+t));i.push(o(t));for(e in i)if(i[e]in a)return!0;return!1},$.loadImg=function(t,e,n){var i=new Image;return i.src=t,i.complete?e(i):(i.onload=function(){i.onload=null,e(i)},void(i.onerror=function(t){i.onerror=null,n&&n(t)}))},$.flow=function(t,e,n){function i(){o=!0,r.button("loading"),e(++u,c)}("string"===$.type(t)||!t instanceof $)&&(t=$(t));var a={scrollElem:d,isAuto:!0,endTxt:"没有更多了",eleTxt:"加载更多",loadingTxt:"加载中..."};n=$.extend({},a,n);var o,s,r=$('<button type="button" class="z-btn z-block" zdata-loading-text="'+n.loadingTxt+'">'+n.eleTxt+"</button>"),l=r.clone().addClass("z-btn-link"),c=$('<div class="z-wrap"></div>'),u=1,f=n.scrollElem&&n.scrollElem!==d,h=$(n.scrollElem),m={reset:function(){u=1,o=null,s=!1,r.html(n.eleTxt).button("reset")},refresh:function(){this.reset(),t.prepend(l),l.button("loading"),r.hide(),o=!0,e(u,c)},disabled:function(){o=!0,r.addClass(z.disabled)},done:function(t){o=null,r.show(),t?(s=t,r.html(n.endTxt).addClass(z.disabled)):r.button("reset"),l.remove()}};return t.wrapInner(c).append(r),c=t.children("div.z-wrap"),r.on(_ck,function(){s||o||i()}),n.isAuto?(_scroll(function(){if(s)return m;var t=h,e=t.scrollTop(),n=f?t.innerHeight():winHeight,a=f?t.prop("scrollHeight"):d.documentElement.scrollHeight;0>=a-e-n&&(o||i())},h),m):m},$.progressBar=function(t){var e=$(".z-progress-fix"),n=0,i=10,a=0;if(!("start"==t&&e.length||"done"==t&&!e.length))return e.length?(e.css("opacity",0).width("100%"),setTimeout(function(){e.remove(),clearInterval(progressTimer)},300)):(e=$('<div class="z-progress-fix"></div>'),$(_b).append(e),progressTimer=setInterval(function(){n+=i,++a,e.width(n+"%"),99===n&&(i/=10),a>=9&&(a=0,i/=10)},300)),e},$.open=function(t,e,n,i,a,o){var s,r=!0,l={},d=arguments;return $.each(d,function(t,e){"array"===$.type(e)?r?(r=!1,l.btns=e,"string"===$.type(d[t+1])&&(l.width=d[t+1])):l.offset=e:"function"===$.type(e)&&(o=e)}),t="string"===$.type(t)?t:"",e="string"===$.type(e)?e:z.title.open,n=l.btns?l.btns:z.btns,i="string"===$.type(i)?i:l.width?l.width:null,a=l.offset?l.offset:null,s=getOpenHtml(t,e,n),s.removeClass("z-modal-sm"),i&&s.width(i),appendOpen(s,function(t){(o&&!o(t)||!o)&&_doClose(s)},a),s},$.alert=function(t,e,n){var i,a;return t=t||"",e=e||z.title.alert,i=n?["",n]:["",z.btns[1]],a=getOpenHtml(t,e,i),appendOpen(a,function(){_doClose(a)}),a},$.confirm=function(t,e,n,i){var a,o={};return $.each(arguments,function(t,e){"array"===$.type(e)?o.btns=e:"function"===$.type(e)&&(i=e)}),t="string"===$.type(t)?t:"",e="string"===$.type(e)?e:z.title.confirm,n=o.btns?o.btns:z.btns,a=getOpenHtml(t,e,n),appendOpen(a,function(t){i&&t>0&&i(t),_doClose(a)}),a},$.prompt=function(t,e,n,i){var a,o,s={};return $.each(arguments,function(t,e){"array"===$.type(e)?s.btns=e:"function"===$.type(e)&&(i=e)}),t="string"===$.type(t)?t:z.title.prompt,e="string"===$.type(e)?e:t,n=s.btns?s.btns:z.btns,o='<input type="text" autofocus class="z-input" placeholder="'+e+'" />',a=getOpenHtml(o,t,n),appendOpen(a,function(t){i&&t>0&&i(a.find(".z-input").val()),_doClose(a)}),a},$.toast=function(t,e){return getToastHtml(t,e)},$.success=function(t,e){return e&&function(){var t=$('<div class="z-shade" style="z-index:'+z.zIndex()+';opacity:0;display:block;"></div>');$(_b).append(t),setTimeout(function(){e(),t.remove()},z.successTime)}(),getToastHtml(t,z.color[5])},$.msg=function(t){$(".z-msg").remove();var e=$('<div class="z-msg '+z.anims[2]+" "+z.animCls+'" style="z-index:'+z.zIndex()+'">'+t+"</div>");return $(_b).append(e),e.css({marginTop:-e.innerHeight()/2,marginLeft:-e.innerWidth()/2}),setTimeout(function(){e.hide(z.closeTime,function(){e.remove()})},z.delayTime),e},$.loadJs=function(t,e){return include("js",t,e)},$.loadCss=function(t,e){return include("css",t,e)},$.back=function(){w.history.go(-1)},$.viewModel=function(t){function e(){$.each(o.concat(s),function(e,n){var i="z-"+n,d=$(a+" ["+i+"]");d.length&&d.each(function(){var e=$(this),a=e.attr(i),d={ele:e,eve:n,tar:a};return-1!==$.inArray(d,r)||-1!==$.inArray(d,l)?!0:(e.removeAttr(i),void(-1!==$.inArray(n,o)?(r.push(d),e.on(n,t[a])):-1!==$.inArray(n,s)&&(l.push(d),e.on(n,function(){var i=t[a];try{i=JSON.parse(i)}catch(o){}"visible"==n?_bool(i)?e.show():e.hide():e[n](i)}),_bool(t[a],!0)||e.trigger(n))))})})}function n(e,n,a){return t[e]=n,$.each(l,function(t,n){n.tar==e&&n.ele.trigger(n.eve)}),_bool(a)&&i._put(),i}var i=t,a=t.$ele,o=["animationend","blur","change","input","click","dblclick","focus","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","scroll","submit"],s=["attr","className","css","text","html","addClass","addAttr","addData","removeClass","removeAttr","removeData","visible"],r=[],l=[],d=a;if(_bool(d,!0))throw new Error("需指定驱动元素");return"string"===$.type(d)||!d instanceof $?d=$(d):a=d.selector,e(),i.$events=r,i.$attrs=l,i._put=e,i._set=n,i},$.fn.tagName=function(){return this[0].tagName.toLowerCase()},$.fn.className=function(t){return _bool(t,!0)?this.className:($(this).each(function(){this.className=t}),$(this))},$.fn.zdata=function(t,e){return _bool(e,!0)?$(this).attr("zdata-"+t):($(this).attr("zdata-"+t,e),$(this))},$.fn.button=function(t){var e=$(this),n=z.disabled;if(!e.length)return e;var i=null;if(i=e.hasClass(n)?"reset":"loading",t=t||i,"loading"===t){if(e.hasClass(n))return!1;var a=e.zdata("loading-text")||"loading";a=z.loadingHtml+"  "+a,e.attr("disabled","true").addClass(n).attr("zdata-old-text",e.html()).html(a)}else if("reset"===t){if(!e.hasClass(n))return!1;var a=e.zdata("old-text")||"resetBtn";e.removeAttr("disabled").removeAttr("zdata-old-text").removeClass(n).html(a)}return e},$.fn.modal=function(t){var e=$(this);if(!e.length)return e;if(!e.hasClass("z-modal"))return e;var n=e.is(":hidden");return"show"!==t||n?"hide"===t&&n?e:(n?$.createShade(function(){e.css("zIndex",z.zIndex()).show().css({left:"50%",marginLeft:-e.innerWidth()/2}).addClass(z.anims[4]+" "+z.animCls),_modalHeight(e)},function(){_doClose(e,null,!1)}):_doClose(e,null,!1),e):e},$.fn.tips=function(t){var e=$(this),n={bgColor:"black",txtColor:"white",autoDie:!0},i=e.selector,a=null;return t=$.extend({},n,t),$(_b).on("mouseenter",i,function(e){var n=this.title,i=$(this).zdata("title"),o=$(this);if(_prevent(e),n||i){n&&($(this).zdata("title",n),$(this).removeAttr("title")),t=_getOpts(o,t);var s=this.offsetWidth,r=o.offset(),l=o.zdata("title"),c="",u=['<div class="z-tipsbox '+z.anims[1]+" "+z.animCls+'" style="z-index:'+z.zIndex()+";top:"+(r.top-40)+"px;left:"+function(){var t=r.left;return 17>s&&(t-=17),0>t&&(t=0),t}()+'px">','<div class="z-tipsbox-content"'+function(){var e='style="';return"black"!==t.bgColor&&(e+="background-color: "+t.bgColor+";"),"white"!==t.txtColor&&(e+="color: "+t.txtColor+";"),e+='"'}()+">",l,'</div><i style="border-right-color:'+t.bgColor+'"></i>',"</div>"];c=$(u.join("")),$(".z-tipsbox").remove(),$(_b).append(c);var f=r.top-c.innerHeight()-10;f-$(d).scrollTop()<0?c.css("top",r.top+o.innerHeight()+10).find("i").css({top:"-8px",bottom:"auto"}):c.css("top",f),_bool(t.autoDie)&&(a&&clearTimeout(a),a=setTimeout(function(){c.remove()},5e3)),o.on("mouseleave",function(){a&&clearTimeout(a),$(".z-tipsbox").remove()})}}),e},$.fn.move=function(t){var e=$(this),n={box:".z-move",top:0,right:0,bottom:0,left:0},i=e.selector,a=!1,o=0,s=0,r=0,l=0,c=winWidth,u=winHeight,f=null;return t=_getOpts(e,n,t),$(w).on("mousemove",function(e){if(a&&f){var n=_prevent(e,!0),i=_mousePosition(n),d=i.left-s,h=i.top-o;h<t.top&&(h=t.top),d<t.left&&(d=t.left),h>u-l-t.bottom&&(h=u-l-t.bottom),d>c-r-t.right&&(d=c-r-t.right),f.css({left:d,top:h})}}),$(_b).on("mousedown",i,function(e){a=!0;var n=_prevent(e,!0);f=$(this).parents(t.box);var i=f.offset(),h=_mousePosition(n);r=f.innerWidth(),l=f.innerHeight(),o=h.top-(i.top-$(d).scrollTop()),s=h.left-(i.left-$(d).scrollLeft()),f.css("zIndex",z.zIndex()),c=winWidth,u=winHeight}),$(_b).on("mouseup",i,function(){a=!1,f=null}),e},$.fn.slider=function(t){function e(t,e){function n(t){l=!1,t=t||"left","left"===t?(Math.abs(f)>=(s-2)*i&&(f=0,u.css(h,f)),f-=i):"right"===t?(Math.abs(f)<=i&&(f=-(s-1)*i,u.css(h,f)),f+=i):f=t,u.animate({marginLeft:f},e.speed,function(){d=parseInt((Math.abs(f)-i)/i),c&&c.removeClass(p).eq(d).addClass(p),e.complete&&e.complete(a.eq(d+1)),l=!0})}e=_getOpts(t,e);var i=t.innerWidth(),a=t.find(e.item),o=t.find(e.items),s=a.length,r=null,l=!0,d=0,c=null,u=null,f=-i,h="marginLeft",m=s>1&&!isMobile?$(z.sliderBtn):"",p=z.active;if(_bool(e.dots)&&(t.append('<div class="z-dots">'+function(){for(var t="",e=0;s>e;e++)t+=0===e?'<a href="javascript:;" class="'+p+'"></a>':'<a href="javascript:;"></a>';return t}()+"</div>"),c=t.find(".z-dots>a"),_bool(e.keys)&&c.on(_ck,function(){n(-($(this).index()+1)*i)})),t.width(i).append(m),s>1){var v=a.eq(0).clone(),g=a.eq(s-1).clone();if(o.prepend(g),o.append(v),a=t.find(e.item),s=a.length,o.wrap("<div></div>"),u=o.parent(),u.css(h,f),a.width(i),o.height(a.innerHeight()).width(s*i),r=setInterval(n,e.delay),isMobile){var b=null,_=0,x="left",w=0;t.on("touchmove",function(t){_prevent(t),w=b.clientX-_,b=t.originalEvent.changedTouches[0],u.css(h,f+w)}),t.on("touchstart",function(t){_prevent(t),b=t.originalEvent.touches[0],_=b.clientX,clearInterval(r)}),t.on("touchend",function(t){_prevent(t),b=t.originalEvent.changedTouches[0],x=b.clientX-_>0?"right":"left",n(x),r=setInterval(n,e.delay)})}else t.on("mouseenter",function(){clearInterval(r)}),t.on("mouseleave",function(){r=setInterval(n,e.delay)}),m.on(_ck,function(){clearInterval(r),l&&n($(this).hasClass(sliderLeftCls)?"left":"right")})}}var n=$(this);if(!n.length)return n;var i={speed:500,delay:5e3,complete:null,keys:!0,dots:!0,items:"ul",item:"li"};return n.each(function(){e($(this),_getOpts($(this),i,t))}),n},$.fn.waterfall=function(t){function e(){{var e={itemSelector:".z-waterfall-item",gutter:0,isAnimated:!0};_getOpts(n,e,t)}n.css("opacity",0).imagesLoaded(function(){n.masonry(t),n.css("opacity",1)})}var n=$(this);return n.length?($.fn.masonry?e():$.loadJs(z.libs.waterfall,e),n):n},$.fn.datepicker=function(t){function e(){var e={minView:"month",format:"yyyy-mm-dd",autoclose:!0},i=_getOpts(n,e,t);n.datetimepicker(i)}var n=$(this),i=z.libs.datepicker;return n.length?($.fn.datetimepicker?e():$.loadCss(i,function(){$.loadJs(i,e)}),n):n},$.fn.hovercard=function(){function t(){var t,a,o,s=n.offset(),r=n.innerWidth(),l=n.innerHeight(),c=e.innerWidth(),u=e.innerHeight(),f=$(d).scrollTop(),h=$(d).scrollLeft(),m=10;winHeight-(s.top-f+l+u+m)>=0?(t=s.top+l+m,a=s.left,o=""):s.top-f-(u+m)>=0?(t=s.top-u-m,a=s.left,o="z-dropdown-menu-bottom"):s.left-h-(c+m)>=0?(t=s.top,a=s.left-c-m,o="z-dropdown-menu-right z-dropdown-menu-child"):(t=s.top,a=s.left+r+m,o="z-dropdown-menu-child"),e.show().className(i+o).css({top:t,left:a,bottom:"auto",right:"auto",zIndex:z.zIndex()})}var e,n,i,a,o=$(this).selector;$(_b).on("mouseenter",o,function(o){var s=$(this),r='<div class="z-loadingbox">'+z.loadingHtml+"</div>",l=!1,d=z.transTime;_prevent(o),clearTimeout(a),a=setTimeout(function(){if(e=$(".z-hovercard"),n=s,s.zdata("html")||s.zdata("url")){if(!e.length){i="z-dropdown-menu z-hovercard ";var o=['<div class="'+i+'">',r,"</div>"];e=$(o.join("")),$(_b).append(e)}s.zdata("html")?(e.html(s.zdata("html")),t()):s.zdata("url")&&(e.html(r),t(),$.get(s.zdata("url"),function(n){e.html(n),t()})),e&&(e.off("mouseenter").on("mouseenter",function(){l=!0}),e.off("mouseleave").on("mouseleave",function(){clearTimeout(a),e.fadeOut(d)}))}},800),s.off("mouseleave").on("mouseleave",function(){clearTimeout(a),setTimeout(function(){!l&&e&&e.fadeOut(d)},400)})})},$.fn.goTop=function(t){var e=$(this);if(!e.length)return e;var n={top:100,time:z.transTime},i=e,a=_getOpts(i,n,t),o="z-on";return _scroll(function(){$(d).scrollTop()>a.top?i.addClass(o):i.removeClass(o)}),i.on(_ck,function(t){_prevent(t,!0),$("body,html").animate({scrollTop:0},a.time)}),i},$.fn.code=function(t){var e=$(this);return e.length?(e.each(function(){{var e=t||{},n=$(this),i=n.html();n.zdata}n.zdata("title")&&(e.title=n.zdata("title")),n.zdata("skin")&&(e.skin=n.zdata("skin")),n.zdata("encode")&&(e.encode=n.zdata("encode")),n.zdata("about-text")&&n.zdata("about-link")&&(e.about='<a href="'+n.zdata("about-link")+' target="_blank>'+n.zdata("about-text")+"</a>"),e.encode&&(i=i.replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")),n.html('<ol class="z-code-ol"><li>'+i.replace(/[\r\t\n]+/g,"</li><li>")+"</li></ol>"),n.find(">.z-code-h3")[0]||!e.title&&!e.about||n.prepend('<h3 class="z-code-h3">'+(e.title||"code")+(e.about||"")+"</h3>");var a=n.find(">.z-code-ol");n.addClass("z-code-view"),e.skin&&n.addClass("z-code-"+e.skin),(a.find("li").length/100|0)>0&&a.css("margin-left",(a.find("li").length/100|0)+"px"),n.find("li").each(function(){$(this).html("<span>"+$(this).html()+"</span>")})}),e):e},$.fn.aniBox=function(t){function e(){if(!a){var t=$(d).scrollTop();if(o>=t){var e=[];if(n.each(function(){var n=$(this);n.zdata("aniName")&&parseInt(n.zdata("top"))<=t+winHeight&&e.push(n)}),e.length)var i=0,s=setInterval(function(){if(i>=e.length)return void clearInterval(s);var t=e[i];t.zdata("aniTime")&&(t.addClass(t.zdata("aniName")).addClass("z-anim-ms"+parseInt(t.zdata("aniTime"))/100).removeAttr("zdata-top").removeAttr("zdata-aniName").removeAttr("zdata-aniTime").animate({opacity:1},z.transTime),++i)},100)}else n.css("opacity",1),a=!0}}var n=$(this);if(!n.length)return n;var i={aniName:z.anims[0],aniTime:500},a=!1;t=$.extend({},i,t),n.each(function(){var e=$(this).offset().top;aniBoxTops.push(e),$(this).css("opacity",0).zdata("top",e),$(this).zdata("aniName")||$(this).zdata("aniName",t.aniName?t.aniName:_getAnim()),$(this).zdata("aniTime")||$(this).zdata("aniTime",t.aniTime)});var o=Math.max.apply({},aniBoxTops);return o=Math.min(o,$(d).innerHeight()-winHeight),e(),$(w).on("scroll",e),n},$.fn.numberBox=function(t){function e(t,e){var n=t.find(e.input),i=t.find(e.next),a=t.find(e.prev),o=parseFloat(e.step),s=parseFloat(e.max),r=parseFloat(e.min),l=z.disabled;n&&i&&a&&n.length&&i.length&&a.length&&(s&&r>s||(n.off("change").on("change",function(){var t=parseFloat($(this).val());isNaN(t)&&(t=r),r>=t?($(this).val(r),a.addClass(l)):a.removeClass(l),s&&t>=parseFloat(s)?($(this).val(s),i.addClass(l)):i.removeClass(l)}),i.off(_ck).on(_ck,function(){var t=parseFloat(n.val());$(this).hasClass(l)||(t+=o,n.val(t).change())}),a.off(_ck).on(_ck,function(){var t=parseFloat(n.val());$(this).hasClass(l)||(t-=o,n.val(t).change())}),n.change()))}var n=$(this);if(!n.length)return n;var i={prev:".z-btn.z-sub",next:".z-btn.z-add",input:"input",min:1,max:null,step:1};return n.each(function(){var n=_getOpts($(this),i,t);e($(this),n)}),n},$.fn.swipeleft=function(t){return swipe("left",$(this),t),$(this)},$.fn.swiperight=function(t){return swipe("right",$(this),t),$(this)},$.fn.mobileNav=function(t){var e=$(this);if(e.length){var n=e.first(),i={item:".z-nav-item,.z-nav-box",logo:"z-logo",navCls:"",menuCls:"",child:".z-dropdown-menu",toggle:!0},a=_getOpts(n,i,t),o=!0,s=n.find(a.item),r=$('<ul class="z-nav z-nav-tree z-nav-mobile"></ul>'),l="",c=$('<ul class="z-menu"><li></li><li></li><li></li></ul>'),u=a.child.replace(".",""),f=z.transTime,h=z.active;if(s.each(function(){$(this).hasClass(a.logo.replace(".",""))&&(l=$(this).clone()),$(this).children(a.child).length&&$(this).children("a").attr("href","javascript:;").removeAttr("target"),r.append($(this).addClass("z-nav-item"))}),n.html(l).append(c).addClass("z-nav-fixed-top").removeClass("z-action-mobilenav"),r.find(a.child).each(function(){$(this).removeClass(u).addClass("z-nav-child").parent().removeClass("z-dropdown")}),a.navCls&&r.addClass(a.navCls),a.toggle&&r.zdata("toggle",a.toggle),a.menuCls&&c.addClass(a.menuCls),n.after(r),c.on(_ck,function(){if(!o)return!1;o=!1;var t=$(this);r.is(":hidden")?($.createShade(function(){r.css("zIndex",z.zIndex()).show().animate({left:0},f),t.addClass(h),o=!0},function(){c.click()},".12"),n.css("zIndex",z.zIndex())):r.animate({left:"-100%"},f,function(){r.hide(),t.removeClass(h),$.closeShade(function(){o=!0})})}),isMobile)return $(d).swiperight(function(){return r.is(":hidden")?void c.click():!1}),$(d).swipeleft(function(){return r.is(":hidden")?!1:void c.click()}),e}},$.fn.flyOut=function(t,e){var n=$(this),i=n.css("opacity"),a=0,o=0,s=winWidth-n.offset().left,r=0,l=13,d=t/l,c=i/d,u=Math.min(s,200)/d,f=10/d;t=t||z.transTime;var h=setInterval(function(){r+=l,i-=c,a+=u,o+=f,n.css({opacity:i,transform:"translate3d("+a+"px,0,0) skew("+o+"deg, 0deg)"}),r>=t&&(clearInterval(h),e&&e())},l);return n},$.fn.lazyimg=function(t,e){function n(t,n){var l=o.scrollTop(),d=l+n,c=r?function(){return t.offset().top-o.offset().top+l}():t.offset().top;if(c>=l&&d>=c&&t.zdata("src")){var u=t.zdata("src");$.loadImg(u,function(){var n=a.eq(s);"img"===t.tagName()?t.attr("src",u):t.css("backgroundImage",'url("'+u+'")'),t.removeAttr("zdata-src"),e&&e(t),n[0]&&i(n),s++})}}function i(t,e){var i=r?(e||o).height():winHeight,l=o.scrollTop(),d=l+i;if(t)n(t,i);else for(var c=0;c<a.length;c++){var u=a.eq(c),f=r?function(){return u.offset().top-o.offset().top+l}():u.offset().top;if(n(u,i),s=c,f>d)break}}var a=$(this);if(!a.length)return a;"function"===$.type(t)&&(e=t,t=d);var o=t||d,s=0,r=o&&o!==d;return o=$(o),i(),_scroll(function(){i(null,o)},o),a},$.fn.album=function(){var t=$(this),e=t.selector;return $(_b).on(_ck,e,function(){function n(){f.css("zIndex",z.zIndex()),f.append(h),d>r.length-1&&(d=0),0>d&&(d=r.length-1);var t=r[d],e=$(t),n=e.zdata("tip")||t.title,a=i(e);n=n?"&nbsp;&nbsp;"+n:"",$.loadImg(a,function(t){var e=winWidth>768?100:20,i=t.width,a=t.height,o=winWidth-e,s=winHeight-e,l=i,c=a;i/a>o/s?(l=Math.min(i,o),c=a*l/i,$(t).css("maxHeight","100%")):(c=Math.min(a,s),l=i*c/a,$(t).css("maxWidth","100%")),m.width(l).height(c),m.show().css({marginLeft:-l/2-2,marginTop:-c/2-2}),h.remove(),p.html(t),v.html(d+1+"/<b>"+r.length+"</b>"+n)})}function i(t){if("img"===t.tagName())var e=t[0].src;else var e=t.css("backgroundImage").replace(/url\([\'\"]{1}(.*)[\'\"]{1}\)/,"$1").toString();return e=t.zdata("bigsrc")||e}var a=this,o=$(a),s=i(o);if(!s||o.zdata("src"))return t;var r=[],l=o.zdata("group"),d=0;if($(e+function(){return _bool(l,!0)?"":'[zdata-group="'+l+'"]'}()).each(function(){r.push(this)}),!r.length)return t;r.sort(function(t,e){var n=parseInt(_bool($(t).zdata("index"),!0)?$(t).index():$(t).zdata("index")),i=parseInt(_bool($(e).zdata("index"),!0)?$(e).index():$(e).zdata("index"));return n-i}),$.each(r,function(t,e){e===a&&(d=t)});var c=r.length>1&&!isMobile?$(z.sliderBtn):"",u=['<div class="z-album">','<span class="z-close z-action-close" zdata-box=".z-album">&times;</span>','<div class="z-album-content '+z.animCls+" "+_getAnim()+'">','<div class="z-imgbox"></div>','<div class="z-tipbox"></div>',"</div>","</div>"],f=$(u.join("")),h=$(z.loadingHtml).html("&#xe623;"),m=f.find(".z-album-content"),p=f.find(".z-imgbox"),v=f.find(".z-tipbox");m.append(c),$.createShade(function(){$(".z-album").remove(),$(_b).append(f),n()},function(){_doClose(f,null,!0,m)}),r.length>1&&(isMobile?(f.swipeleft(function(t){_prevent(t,!0),--d,n()}),f.swiperight(function(t){_prevent(t,!0),++d,n()})):c&&c.on(_ck,function(){$(this).hasClass(sliderLeftCls)?--d:++d,n()})),$(w).on("keyup",function(t){var e=t.which;r.length>1&&(37==e?(--d,n()):39==e&&(++d,n())),27==e&&_doClose(f,null,!0,m)})}),t},$.fn.dropdown=function(t,e){var n=$(this),i=n.selector,a=z.active;if(t=t||_ck,e){var o=t;"hover"==o&&(o="mouseenter"),$(_b).on(o,i,function(){var t=$(this);t.hasClass(a)?t.removeClass(a):(_bool(t.parent().zdata("toggle"))&&t.siblings(i).removeClass(a),t.addClass(a))}),n.find(".z-nav-child").on(_ck,function(t){t.stopPropagation()})}else"hover"==t?$(_b).on("mouseenter",i,function(){var t=$(this);t.addClass(a),t.on("mouseleave",function(){$(this).removeClass(a)})}):t==_ck&&($(_b).on(_ck,i,function(t){var e=$(this);_prevent(t),e.hasClass(a)?e.removeClass(a):($(i).removeClass(a),e.addClass(a))}),$(d).on(_ck,function(){$(i).removeClass(a)}));return n},$(function(){var t=z.active;$(".z-action-code").code(),$(".z-action-datepicker").datepicker(),isMobile?$(".z-action-mobilenav").mobileNav():($(".z-action-hovercard").hovercard(),$(".z-action-tips").tips(),$(".z-action-move").move()),$(".z-action-gotop").goTop(),$(".z-action-slider").slider(),$(".z-action-anibox").aniBox(),$(".z-action-lazyimg").lazyimg(),$(".z-action-album").album(),$(".z-action-numberbox").numberBox(),$(".z-action-dropdown").dropdown(),$(".z-action-dropdown-hover").dropdown("hover"),$(".z-action-tree").dropdown(_ck,!0),$(".z-action-tree-hover").dropdown("hover",!0),$.resetForm(),$(_b).on(_ck,".z-form-radio",function(){if(!$(this).hasClass(t)){var e=$(this).zdata("id"),n=$(this).zdata("name");$('.z-form-radio[zdata-name="'+n+'"]').removeClass(t),$(this).addClass(t),$('input[type="radio"][name="'+n+'"]').each(function(){this.checked=$(this).zdata("id")===e,$(this).change()})}}),$(_b).on(_ck,".z-form-checkbox",function(){var e=$(this).zdata("id"),n=$(this);n.toggleClass(t),$('input[type="checkbox"][zdata-id="'+e+'"]').each(function(){this.checked=n.hasClass(t),$(this).change()})}),$(_b).on(_ck,".z-action-modal",function(){var t=$(this).zdata("target");t&&t.length&&$(t).length&&$(t).modal()}),$(_b).on(_ck,".z-action-close",function(){var t=$(this),e=null,n=null;$.each(zBoxs,function(i,a){var o=a.cls,s=a.ani;return t.parents(o).length?(e=t.parents(o),s&&(n=e.find(o+"-content")),!1):void 0}),e||(e=t.parents(t.zdata("box"))),n=n||e,e&&e.length&&_doClose(e,null,t.zdata("remove"),n)}),$(_b).on(_ck,".z-action-back",function(){$.back()}),$(_b).on(_ck,".z-tab-title>li",function(){tabs(this)}),$(".z-tab-title>li").on(_ck,function(t){_prevent(t),tabs(this)}),$(".z-tab-title").each(function(){$(this).children("li:first").click()}),$(".z-nav.z-nav-fixed-top").length&&$(_b).css("paddingTop",$(".z-nav.z-nav-fixed-top").innerHeight()+20),$(".z-nav.z-nav-fixed-bottom").length&&$(_b).css("paddingBottom",$(".z-nav.z-nav-fixed-bottom").innerHeight()+20),$(d).on(_ck,".z-disabled,:disabled",function(t){return _prevent(t,!0),!1}),$(".z-disabled,:disabled").on(_ck,function(t){return _prevent(t,!0),!1}),$(w).on("resize",function(){z.winWidth=winWidth=$(w).innerWidth(),z.winHeight=winHeight=$(w).innerHeight()})}),z});