!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:window.z=t(jQuery)}(function($,undefined){function swipe(t,e,n){var i=0,a=0,o=event,r=!1,s=null;e.on("touchstart",function(t){_prevent(t),o=t.originalEvent.touches[0],i=o.clientX,a=o.clientY,r=!0,s=setTimeout(function(){r=!1},z.transTime)}),e.on("touchend",function(e){_prevent(e),o=e.originalEvent.changedTouches[0];var l="left"===t?i-o.clientX:o.clientX-i;l>50&&Math.abs(a-o.clientY)<50&&(n&&r&&n(e),s&&clearTimeout(s))})}function include(t,e,n){function i(){if(s<e.length){var n=e[s];if(_getZsrc(n))return void a();n.substr(-r.length)!==r&&(n+=r),-1===n.indexOf("://")&&(n=z.rootPath+n),"js"===t?(o=d.createElement("script"),o.src=n):"css"===t&&(o=d.createElement("link"),o.rel="stylesheet",o.href=n),d.head.appendChild(o),o.onload=function(){a()}}}function a(){s===e.length-1?n&&n():(s++,i())}if(e&&("string"===$.type(e)&&(e=[e]),"array"===$.type(e))){var o,r="."+t,s=0;return i(),o}}function getOpenHtml(t,e,n){for(var i=['<div class="z-modal z-move z-modal-sm '+z.animCls+" "+_getAnim()+'">','<div class="z-modal-header z-move-title z-action-move">','<button type="button" class="z-close z-action-close">&times;</button>','<h4 class="z-modal-title">'+e+"</h4>","</div>",'<div class="z-modal-body">',t,"</div>",'<div class="z-modal-footer z-text-center">'],a=0;a<n.length;a++)n[a].length&&i.push('<button type="button" class="z-btn z-btn-'+z.color[a]+'">'+n[a]+"</button>");return i.push("</div></div>"),$(i.join(""))}function getToastHtml(t,e){var n=$(".z-alert-box");e=e||z.color[3],t=t||"",n&&n.length||(n=$('<div class="z-alert-box"></div>'),$(_b).append(n)),n.css("zIndex",z.zIndex()),htmls=['<div class="z-alert z-alert-'+e+" z-alert-dismissible "+z.anims[4]+" "+z.animCls+'">','<button type="button" class="z-close z-action-close">&times;</button>',t,"</div>"];var i=$(htmls.join(""));return n.prepend(i),i.trigger(showed,i),setTimeout(function(){_doClose(i)},z.delayTime),i}function appendOpen(t,e,n){$.createShade(function(){$(_b).append(t),t.css("zIndex",z.zIndex()).show();var i=t.innerWidth(),a=t.innerHeight(),o=winWidth,r=winHeight;t.css({margin:0,top:n&&n[0]?n[0]:(r-a)/3>0?(r-a)/3:0,left:n&&n[1]?n[1]:(o-i)/2>0?(o-i)/2:0}),_modalHeight(t),t.find(".z-modal-footer .z-btn").on(_ck,function(){e&&e($(this).index())}),t.trigger(showed,t)}),$(w).on("keyup",function(e){27==e.which&&_doClose(t)})}function tabs(t){var e=z.active,n=$(t),i=n.parent().find("li"),a=n.parents(".z-tab").find(".z-tab-content>.z-tab-item"),o=n.index();n.hasClass(e)||(i.removeClass(e),n.addClass(e),a.hide().eq(o).show())}function likeObject(t){return"string"!==$.type(t)?!1:(t=t.replace(/\s/g,"").replace(/\n|\r/,""),/^\{(.*?)\}$/.test(t)?/"(.*?)":(.*?)/g.test(t):!1)}function _getZsrc(t){for(var e=d.getElementsByTagName("script"),n=/[\\\/]z\.(min\.)?js/,i=0;i<e.length;i++){var a=e[i].src;if(t){if(-1!==a.indexOf(t))return!0}else if(a.match(n))return a.replace(/z\.(min\.)?js(\?.*)?$/,"")}return!1}function _getAnim(){var t=z.anims;return t[Math.floor(Math.random()*t.length)]}function _doClose(t,e,n,i){function a(){!t.hasClass(zBoxs[0].cls.replace(".",""))&&$.closeShade(o),t.trigger(hideed),n&&t.remove(),e&&e()}var i=i||t,o=z.closeTime;_bool(n,!0)&&(n=!0),n=_bool(n),n?i.flyOut(o,a):t.slideUp(o,a)}function _mousePosition(t){return{top:t.clientY,left:t.clientX}}function _getOpts(t,e,n){var i=e;return n&&(i=$.extend({},e,n)),$.each(i,function(e){_bool(t.zdata(e),!0)||(i[e]=t.zdata(e))}),i}function _bool(t,e){var n="undefined"===$.type(t);return e?n:n?!1:"boolean"===$.type(t)?t:"false"==t?!1:!0}function _modalHeight(t){var e=t.children(".z-modal-header"),n=t.children(".z-modal-body"),i=t.children(".z-modal-footer");n.css("maxHeight",winHeight-e.innerHeight()-i.innerHeight()-30)}function _scroll(t,e){var n;e=e||$(d),e.on("scroll",function(){clearTimeout(n),n=setTimeout(t,60)})}function _prevent(t,e){var n=t||event;return n.stopPropagation(),e&&n.preventDefault(),n}var w=window,d=document,log=console.log,_ck="click",_b="body",winWidth=$(w).innerWidth(),winHeight=$(w).innerHeight(),transTime=200,rootPath=_getZsrc(),libsPath=rootPath.replace("js/","")+"libs/",isMobile=function(){return navigator.userAgent.match(/mobile/i)}(),dateNow=new Date,zShade=null,zShades=0,zBoxs=[{cls:".z-alert"},{cls:".z-modal"},{cls:".z-album",ani:!0}],progressTimer=null,aniBoxTops=[],Fn=$.fn,showed="showed",hideed="hideed",z={version:"2.0.0",rootPath:rootPath,libsPath:libsPath,index:99,zIndex:function(){return++this.index},anims:["z-anim-upbit","z-anim-scale","z-anim-scaleSpring","z-anim-up","z-anim-downbit"],animCls:"z-anim-ms3",libs:{form:libsPath+"jquery.form.min",waterfall:libsPath+"masonry-docs.min",jscrollpane:libsPath+"jquery.jscrollpane.min",datepicker:libsPath+"bootstrap-datetimepicker.min"},title:{alert:"警告框",confirm:"询问框",prompt:"输入框",open:"提示窗体"},btns:["取消","确认"],color:["default","blue","yellow","red","dark","green"],isMobile:isMobile,transTime:transTime,closeTime:.6*transTime,successTime:8*transTime,delayTime:4e3,active:"z-active",disabled:"z-disabled",overflow:"z-overflow",dt:dateNow,loadingHtml:'<span class="z-anim-rotate z-icon">&#xe624;</span>',sliderBtn:'<button class="z-slider-btn z-icon z-slider-prev">&#xe605;</button><button class="z-slider-btn z-icon z-slider-next">&#xe61d;</button>',winWidth:winWidth,winHeight:winHeight},sliderLeftCls=function(){return $(z.sliderBtn)[0].className}();return $.createShade=function(t,e,n){return zShade?t&&t():(zShade=$('<div class="z-shade" style="z-index:'+z.zIndex()+";"+function(){return _bool(n)?"opacity:"+n:""}()+'"></div>'),$(_b).addClass(z.overflow),isMobile||$(_b).css("paddingRight","8px"),$(_b).append(zShade),zShade.fadeIn(z.transTime,t&&t)),++zShades,zShade.on(_ck,function(){e&&e()&&$.closeShade()}),zShade},$.closeShade=function(t,e,n){return zShade?(n&&(zShades=0),--zShades,void(0>=zShades&&(zShades=0,"function"===$.type(t)&&(e=t,t=z.transTime),t=t||z.transTime,zShade.fadeOut(t,function(){zShade.remove(),$(_b).removeClass(z.overflow).css("paddingRight",""),zShade=null,e&&e()})))):!1},$.resetForm=function(t){function e(t){t.length&&t.each(function(t){var e=this.checked,n=this.name,i=n+t.toString(),a=this.type;if(_bool($(this).zdata("noreform")))return $(this).show(),!0;if(_bool($(this).zdata("name"),!0)){var o='<div class="z-unselect z-form-'+a+function(){return e?" "+z.active:""}()+'" zdata-id="'+i+'" zdata-name="'+n+'"><i class="z-anim z-icon">'+function(){return"radio"==a?"&#xe998;":"&#xe615;"}()+"</i><span>"+this.title+"</span></div>";$(this).zdata("id",i),$(this).after(o)}})}return _bool(t,!0)?e($('.z-form input[type="radio"],.z-form input[type="checkbox"]')):(!t instanceof $&&(t=$(t)),e(t)),t},$.submit=function(ele,cb,tip){function doing(){form.find("fieldset").length||form.wrapInner("<fieldset></fieldset>");var fieldset=form.find("fieldset");return fieldset.attr("disabled")?!1:(fieldset.attr("disabled",!0),_bool(tip)&&($(".z-msg").remove(),$(_b).append(html),html.css({marginTop:-html.innerHeight()/2,marginLeft:-html.innerWidth()/2})),form.ajaxForm(),void form.ajaxSubmit({success:function(responseText,statusText,xhr,$form){if("success"==statusText){var ret=responseText;fieldset.removeAttr("disabled"),tip&&html.remove(),likeObject(ret)&&(w.JSON?ret=JSON.parse(responseText):eval("ret = "+responseText)),cb(ret)}}}))}var form=ele instanceof $?ele:$(ele),datatip=form.zdata("tip"),notdatatip=_bool(datatip,!0);tip=_bool(tip,!0)&&notdatatip?"数据提交中...":notdatatip?tip:datatip;var html=$('<div class="z-msg" style="z-index:'+z.zIndex()+'">'+tip+"</div>");return form&&form.length&&form.attr("action")?($.fn.ajaxSubmit?doing():$.loadJs(z.libs.form,doing),html):!1},$.date=function(t,e){var n=dateNow,i="yyyy/MM/dd H:mm",a=n.getTime(),o=!1;"date"===$.type(t)||"number"===$.type(t)?(e=t,t=i):_bool(t,!0)&&(t=i,e=a),_bool(e,!0)?e=a:"string"===$.type(e)?e=parseInt(e):"date"===$.type(e)&&(n=e,o=!0),o||(n=new Date(e));var r=n.getFullYear(),s=n.getMonth(),l=n.getDate(),d=n.getHours(),c=n.getMinutes(),u=n.getSeconds(),h=n.getMilliseconds(),f=n.getTimezoneOffset(),m=n.getDay(),p=["日","一","二","三","四","五","六"],z=d>12?d-12:d,v={"y+":r,"M+":s+1,"d+":l,"H+":d,"h+":0==z?12:z,"m+":c,"s+":u,ms:h,"a+":d>12||0==d?"PM":"AM","w+":m,"W+":p[m],"q+":Math.floor((c+3)/3),"z+":f};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var g in v)new RegExp("("+g+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?v[g]:("00"+v[g]).substr((""+v[g]).length)));return t},$.getFileUrl=function(t){function e(t){var e=null;return w.createObjectURL!=undefined?e=w.createObjectURL(t):w.URL!=undefined?e=w.URL.createObjectURL(t):w.webkitURL!=undefined&&(e=w.webkitURL.createObjectURL(t)),e}var n=[],i=t.files;return i&&i.length?($.each(i,function(t,i){n.push(e(i))}),n.length>1?n:n[0]):void 0},$.supportCss3=function(t){var e,n=["webkit","Moz","ms","o"],i=[],a=d.documentElement.style,o=function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})};t=t||"animation";for(e in n)i.push(o(n[e]+"-"+t));i.push(o(t));for(e in i)if(i[e]in a)return!0;return!1},$.loadImg=function(t,e,n){var i=new Image;return i.src=t,i.complete&&e(i),i.onload=function(){i.onload=null,e(i)},i.onerror=function(t){i.onerror=null,n&&n(t)},i},$.flow=function(t,e,n){function i(){o=!0,s.button("loading"),e(++u,c)}("string"===$.type(t)||!t instanceof $)&&(t=$(t));var a={scrollElem:d,isAuto:!0,endTxt:"没有更多了",eleTxt:"加载更多",loadingTxt:"加载中..."};n=$.extend({},a,n);var o,r,s=$('<button type="button" class="z-btn z-block" zdata-loading-text="'+n.loadingTxt+'">'+n.eleTxt+"</button>"),l=s.clone().addClass("z-btn-link"),c=$('<div class="z-wrap"></div>'),u=1,h=n.scrollElem&&n.scrollElem!==d,f=$(n.scrollElem),m={reset:function(){u=1,o=null,r=!1,s.html(n.eleTxt).button("reset")},refresh:function(){this.reset(),t.prepend(l),l.button("loading"),s.hide(),o=!0,e(u,c)},disabled:function(){o=!0,s.addClass(z.disabled)},done:function(t){o=null,s.show(),t?(r=t,s.html(n.endTxt).addClass(z.disabled)):s.button("reset"),l.remove()}};return t.wrapInner(c).append(s),c=t.children("div.z-wrap"),s.on(_ck,function(){r||o||i()}),n.isAuto?(_scroll(function(){if(r)return m;var t=f,e=t.scrollTop(),n=h?t.innerHeight():winHeight,a=h?t.prop("scrollHeight"):d.documentElement.scrollHeight;0>=a-e-n&&(o||i())},f),m):m},$.progressBar=function(t,e){var n=0,i=10,a=0,e=$(_bool(e,!0)?_b:e),o=e.find(".z-progress-fix");if(!("start"==t&&o.length||"done"==t&&!o.length))return o.length?(o.css("opacity",0).width("100%"),setTimeout(function(){o.remove(),clearInterval(progressTimer)},300)):(o=$('<div class="z-progress-fix"></div>'),e.append(o),progressTimer=setInterval(function(){n+=i,++a,o.width(n+"%"),99===n&&(i/=10),a>=9&&(a=0,i/=10)},300)),o},$.open=function(t,e,n,i,a,o){var r,s=!0,l={},d=arguments;return $.each(d,function(t,e){"array"===$.type(e)?s?(s=!1,l.btns=e,"string"===$.type(d[t+1])&&(l.width=d[t+1])):l.offset=e:"function"===$.type(e)&&(o=e)}),t="string"===$.type(t)?t:"",e="string"===$.type(e)?e:z.title.open,n=l.btns?l.btns:z.btns,i="string"===$.type(i)?i:l.width?l.width:null,a=l.offset?l.offset:null,r=getOpenHtml(t,e,n),r.removeClass("z-modal-sm"),i&&r.width(i),appendOpen(r,function(t){(o&&!o(t)||!o)&&_doClose(r)},a),r},$.alert=function(t,e,n){var i,a;return t=t||"",e=e||z.title.alert,i=n?["",n]:["",z.btns[1]],a=getOpenHtml(t,e,i),appendOpen(a,function(){_doClose(a)}),a},$.confirm=function(t,e,n,i){var a,o={};return $.each(arguments,function(t,e){"array"===$.type(e)?o.btns=e:"function"===$.type(e)&&(i=e)}),t="string"===$.type(t)?t:"",e="string"===$.type(e)?e:z.title.confirm,n=o.btns?o.btns:z.btns,a=getOpenHtml(t,e,n),appendOpen(a,function(t){i&&t>0&&i(t),_doClose(a)}),a},$.prompt=function(t,e,n,i){var a,o,r={};return $.each(arguments,function(t,e){"array"===$.type(e)?r.btns=e:"function"===$.type(e)&&(i=e)}),t="string"===$.type(t)?t:z.title.prompt,e="string"===$.type(e)?e:t,n=r.btns?r.btns:z.btns,o='<input type="text" autofocus class="z-input" placeholder="'+e+'" />',a=getOpenHtml(o,t,n),appendOpen(a,function(t){i&&t>0&&i(a.find(".z-input").val()),_doClose(a)}),a},$.toast=function(t,e){return getToastHtml(t,e)},$.success=function(t,e){return e&&function(){var t=$('<div class="z-shade" style="z-index:'+z.zIndex()+';opacity:0;display:block;"></div>');$(_b).append(t),setTimeout(function(){e(),t.remove()},z.successTime)}(),getToastHtml(t,z.color[5])},$.msg=function(t){$(".z-msg").remove();var e=$('<div class="z-msg '+z.anims[2]+" "+z.animCls+'" style="z-index:'+z.zIndex()+'">'+t+"</div>");return $(_b).append(e),e.css({marginTop:-e.innerHeight()/2,marginLeft:-e.innerWidth()/2}),setTimeout(function(){e.hide(z.closeTime,function(){e.trigger(hideed),e.remove()})},z.delayTime),e.trigger(showed,e),e},$.loadJs=function(t,e){return include("js",t,e)},$.loadCss=function(t,e){return include("css",t,e)},$.back=function(){w.history.go(-1)},$.viewModel=function(t){function e(){$.each(a.concat(o),function(e,n){var i="z-"+n,l=$("["+i+"]");l.length&&l.each(function(){var e=$(this),l=e.attr(i),d={ele:e,eve:n,tar:l};return-1!==$.inArray(d,r)||-1!==$.inArray(d,s)?!0:(e.removeAttr(i),void(-1!==$.inArray(n,a)?(r.push(d),e.on(n,t[l])):-1!==$.inArray(n,o)&&(s.push(d),e.on(n,function(){var i=t[l];likeObject(i)&&(i=JSON.parse(i)),"visible"==n?_bool(i)?e.show():e.hide():e[n](i)}),_bool(t[l],!0)||e.trigger(n))))})})}function n(e,n,a){return t[e]=n,$.each(s,function(t,n){n.tar==e&&n.ele.trigger(n.eve)}),_bool(a)&&i._put(),i}var i=t,a=["animationend","blur","change","input","click","dblclick","focus","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","scroll","submit"],o=["attr","className","css","text","html","addClass","addAttr","addData","removeClass","removeAttr","removeData","visible"],r=[],s=[];return e(),i.$events=r,i.$attrs=s,i._put=e,i._set=n,i},Fn.tagName=function(){return this[0].tagName.toLowerCase()},Fn.className=function(t){return _bool(t,!0)?this.className:($(this).each(function(){this.className=t}),$(this))},Fn.zdata=function(t,e){return _bool(e,!0)?$(this).attr("zdata-"+t):($(this).attr("zdata-"+t,e),$(this))},Fn.button=function(t){var e=$(this),n=z.disabled;if(!e.length)return e;var i=null;if(i=e.hasClass(n)?"reset":"loading",t=t||i,"loading"===t){if(e.hasClass(n))return!1;var a=e.zdata("loading-text")||"loading";a=z.loadingHtml+"  "+a,e.attr("disabled","true").addClass(n).attr("zdata-old-text",e.html()).html(a)}else if("reset"===t){if(!e.hasClass(n))return!1;var a=e.zdata("old-text")||"resetBtn";e.removeAttr("disabled").removeAttr("zdata-old-text").removeClass(n).html(a)}return e},Fn.modal=function(t){var e=$(this);if(!e.length)return e;if(!e.hasClass("z-modal"))return e;var n=e.is(":hidden");return"show"!==t||n?"hide"===t&&n?e:(n?$.createShade(function(){e.css("zIndex",z.zIndex()).show().css({left:"50%",marginLeft:-e.innerWidth()/2}).addClass(z.anims[4]+" "+z.animCls),_modalHeight(e),e.trigger(showed)},function(){_doClose(e,null,!1)}):_doClose(e,null,!1),e):e},Fn.tips=function(t){var e=$(this),n={bgColor:"black",txtColor:"white",autoDie:!0},i=e.selector,a=null;return t=$.extend({},n,t),$(_b).on("mouseenter",i,function(e){var n=this.title,i=$(this).zdata("title"),o=$(this);if(_prevent(e),n||i){n&&($(this).zdata("title",n),$(this).removeAttr("title")),t=_getOpts(o,t);var r=this.offsetWidth,s=o.offset(),l=o.zdata("title"),c="",u=['<div class="z-tipsbox '+z.anims[1]+" "+z.animCls+'" style="z-index:'+z.zIndex()+";top:"+(s.top-40)+"px;left:"+function(){var t=s.left;return 17>r&&(t-=17),0>t&&(t=0),t}()+'px">','<div class="z-tipsbox-content"'+function(){var e='style="';return"black"!==t.bgColor&&(e+="background-color: "+t.bgColor+";"),"white"!==t.txtColor&&(e+="color: "+t.txtColor+";"),e+='"'}()+">",l,'</div><i style="border-right-color:'+t.bgColor+'"></i>',"</div>"];c=$(u.join("")),$(".z-tipsbox").remove(),$(_b).append(c);var h=s.top-c.innerHeight()-10;h-$(d).scrollTop()<0?c.css("top",s.top+o.innerHeight()+10).find("i").css({top:"-8px",bottom:"auto"}):c.css("top",h),_bool(t.autoDie)&&(a&&clearTimeout(a),a=setTimeout(function(){c.remove()},5e3)),o.on("mouseleave",function(){a&&clearTimeout(a),$(".z-tipsbox").remove()})}}),e},Fn.move=function(t){var e=$(this),n={box:".z-move",top:0,right:0,bottom:0,left:0},i=e.selector,a=!1,o=0,r=0,s=0,l=0,c=winWidth,u=winHeight,h=null;return t=_getOpts(e,n,t),$(w).on("mousemove",function(e){if(a&&h){var n=_prevent(e,!0),i=_mousePosition(n),d=i.left-r,f=i.top-o;f<t.top&&(f=t.top),d<t.left&&(d=t.left),f>u-l-t.bottom&&(f=u-l-t.bottom),d>c-s-t.right&&(d=c-s-t.right),h.css({left:d,top:f})}}),$(_b).on("mousedown",i,function(e){a=!0;var n=_prevent(e,!0);h=$(this).parents(t.box);var i=h.offset(),f=_mousePosition(n);s=h.innerWidth(),l=h.innerHeight(),o=f.top-(i.top-$(d).scrollTop()),r=f.left-(i.left-$(d).scrollLeft()),h.css("zIndex",z.zIndex()),c=winWidth,u=winHeight}),$(_b).on("mouseup",i,function(){a=!1,h=null}),e},Fn.slider=function(t){function e(t,e){function n(t){l=!1,t=t||"left","left"===t?(Math.abs(h)<=i&&(h=-(r-1)*i,u.css(f,h)),h+=i):"right"===t?(Math.abs(h)>=(r-2)*i&&(h=0,u.css(f,h)),h-=i):h=t,u.animate({marginLeft:h},e.speed,function(){d=parseInt((Math.abs(h)-i)/i),c&&c.removeClass(p).eq(d).addClass(p),e.complete&&e.complete(a.eq(d+1)),l=!0})}e=_getOpts(t,e);var i=t.innerWidth(),a=t.find(e.item),o=t.find(e.items),r=a.length,s=null,l=!0,d=0,c=null,u=null,h=-i,f="marginLeft",m=r>1&&!isMobile?$(z.sliderBtn):"",p=z.active;if(!(1>r)){if(_bool(e.dots)&&(t.append('<div class="z-dots">'+function(){for(var t="",e=0;r>e;e++)t+=0===e?'<a href="javascript:;" class="'+p+'"></a>':'<a href="javascript:;"></a>';return t}()+"</div>"),c=t.find(".z-dots>a"),_bool(e.keys)&&c.on(_ck,function(){n(-($(this).index()+1)*i)})),t.width(i).append(m),r>1){var v=a.eq(0).clone(),g=a.eq(r-1).clone();o.prepend(g),o.append(v),a=t.find(e.item),r=a.length,o.wrap("<div></div>"),u=o.parent(),u.css(f,h)}if(a.width(i),o.height(a.innerHeight()).width(r*i),s=setInterval(n,e.delay),isMobile){var b=null,_=0,x="left",w=0;t.on("touchmove",function(t){_prevent(t),w=b.clientX-_,b=t.originalEvent.changedTouches[0],u.css(f,h+w)}),t.on("touchstart",function(t){_prevent(t),b=t.originalEvent.touches[0],_=b.clientX,clearInterval(s)}),t.on("touchend",function(t){_prevent(t),b=t.originalEvent.changedTouches[0],x=b.clientX-_>0?"left":"right",n(x),s=setInterval(n,e.delay)})}else t.on("mouseenter",function(){clearInterval(s)}),t.on("mouseleave",function(){s=setInterval(n,e.delay)}),m.on(_ck,function(){clearInterval(s),l&&n($(this).hasClass(sliderLeftCls)?"left":"right")})}}var n=$(this);if(!n.length)return n;var i={speed:500,delay:5e3,complete:null,keys:!0,dots:!0,items:"ul",item:"li"};return n.each(function(){e($(this),_getOpts($(this),i,t))}),n},Fn.waterfall=function(t){function e(){{var e={itemSelector:".z-waterfall-item",gutter:0,isAnimated:!0};_getOpts(n,e,t)}n.css("opacity",0).imagesLoaded(function(){n.masonry(t),n.css("opacity",1)})}var n=$(this);return n.length?(Fn.masonry?e():$.loadJs(z.libs.waterfall,e),n):n},Fn.datepicker=function(t){function e(){var e={minView:"month",format:"yyyy-mm-dd",autoclose:!0},i=_getOpts(n,e,t);n.datetimepicker(i)}var n=$(this),i=z.libs.datepicker;return n.length?(Fn.datetimepicker?e():$.loadCss(i,function(){$.loadJs(i,e)}),n):n},Fn.hovercard=function(){function t(){var t,a,o,r=n.offset(),s=n.innerWidth(),l=n.innerHeight(),c=e.innerWidth(),u=e.innerHeight(),h=$(d).scrollTop(),f=$(d).scrollLeft(),m=10;winHeight-(r.top-h+l+u+m)>=0?(t=r.top+l+m,a=r.left,o=""):r.top-h-(u+m)>=0?(t=r.top-u-m,a=r.left,o="z-dropdown-menu-bottom"):r.left-f-(c+m)>=0?(t=r.top,a=r.left-c-m,o="z-dropdown-menu-right z-dropdown-menu-child"):(t=r.top,a=r.left+s+m,o="z-dropdown-menu-child"),e.show().className(i+o).css({top:t,left:a,bottom:"auto",right:"auto",zIndex:z.zIndex()})}var e,n,i,a,o=$(this).selector;$(_b).on("mouseenter",o,function(o){var r=$(this),s='<div class="z-loadingbox">'+z.loadingHtml+"</div>",l=!1,d=z.transTime;_prevent(o),clearTimeout(a),a=setTimeout(function(){if(e=$(".z-hovercard"),n=r,r.zdata("html")||r.zdata("url")){if(!e.length){i="z-dropdown-menu z-hovercard ";var o=['<div class="'+i+'">',s,"</div>"];e=$(o.join("")),$(_b).append(e)}r.zdata("html")?(e.html(r.zdata("html")),t()):r.zdata("url")&&(e.html(s),t(),$.get(r.zdata("url"),function(n){e.html(n),t()})),e&&(r.trigger(showed,e),e.off("mouseenter").on("mouseenter",function(){l=!0}),e.off("mouseleave").on("mouseleave",function(){clearTimeout(a),e.fadeOut(d,function(){r.trigger(hideed)})}))}},800),r.off("mouseleave").on("mouseleave",function(){clearTimeout(a),setTimeout(function(){!l&&e&&e.fadeOut(d,function(){r.trigger(hideed)})},400)})})},Fn.goTop=function(t){var e=$(this);if(!e.length)return e;var n={top:100,time:z.transTime},i=e,a=_getOpts(i,n,t),o="z-on";return _scroll(function(){$(d).scrollTop()>a.top?i.addClass(o):i.removeClass(o)}),i.on(_ck,function(t){_prevent(t,!0),$("body,html").animate({scrollTop:0},a.time)}),i},Fn.code=function(t){var e=$(this);return e.length?(e.each(function(){{var e=t||{},n=$(this),i=n.html();n.zdata}n.zdata("title")&&(e.title=n.zdata("title")),n.zdata("skin")&&(e.skin=n.zdata("skin")),n.zdata("encode")&&(e.encode=n.zdata("encode")),n.zdata("about-text")&&n.zdata("about-link")&&(e.about='<a href="'+n.zdata("about-link")+' target="_blank>'+n.zdata("about-text")+"</a>"),e.encode&&(i=i.replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")),n.html('<ol class="z-code-ol"><li>'+i.replace(/[\r\t\n]+/g,"</li><li>")+"</li></ol>"),n.find(">.z-code-h3")[0]||!e.title&&!e.about||n.prepend('<h3 class="z-code-h3">'+(e.title||"code")+(e.about||"")+"</h3>");var a=n.find(">.z-code-ol");n.addClass("z-code-view"),e.skin&&n.addClass("z-code-"+e.skin),(a.find("li").length/100|0)>0&&a.css("margin-left",(a.find("li").length/100|0)+"px"),n.find("li").each(function(){$(this).html("<span>"+$(this).html()+"</span>")})}),e):e},Fn.aniBox=function(t){function e(){if(!a){var t=$(d).scrollTop();if(o>=t){var e=[];if(n.each(function(){var n=$(this);n.zdata("aniName")&&parseInt(n.zdata("top"))<=t+winHeight&&e.push(n)}),e.length)var i=0,r=setInterval(function(){if(i>=e.length)return void clearInterval(r);var t=e[i];t.zdata("aniTime")&&(t.addClass(t.zdata("aniName")).addClass("z-anim-ms"+parseInt(t.zdata("aniTime"))/100).removeAttr("zdata-top").removeAttr("zdata-aniName").removeAttr("zdata-aniTime").animate({opacity:1},z.transTime),++i)},100)}else n.css("opacity",1),a=!0}}var n=$(this);if(!n.length)return n;var i={aniName:z.anims[0],aniTime:500},a=!1;t=$.extend({},i,t),n.each(function(){var e=$(this).offset().top;aniBoxTops.push(e),$(this).css("opacity",0).zdata("top",e),$(this).zdata("aniName")||$(this).zdata("aniName",t.aniName?t.aniName:_getAnim()),$(this).zdata("aniTime")||$(this).zdata("aniTime",t.aniTime)});var o=Math.max.apply({},aniBoxTops);return o=Math.min(o,$(d).innerHeight()-winHeight),e(),$(w).on("scroll",e),n},Fn.numberBox=function(t){function e(t,e){var n=t.find(e.input),i=t.find(e.next),a=t.find(e.prev),o=parseFloat(e.step),r=parseFloat(e.max),s=parseFloat(e.min),l=z.disabled;n&&i&&a&&n.length&&i.length&&a.length&&(r&&s>r||(n.off("change").on("change",function(){var t=parseFloat($(this).val());isNaN(t)&&(t=s),s>=t?($(this).val(s),a.addClass(l)):a.removeClass(l),r&&t>=parseFloat(r)?($(this).val(r),i.addClass(l)):i.removeClass(l)}),i.off(_ck).on(_ck,function(){var t=parseFloat(n.val());$(this).hasClass(l)||(t+=o,n.val(t).change())}),a.off(_ck).on(_ck,function(){var t=parseFloat(n.val());$(this).hasClass(l)||(t-=o,n.val(t).change())}),n.change()))}var n=$(this);if(!n.length)return n;var i={prev:".z-btn.z-sub",next:".z-btn.z-add",input:"input",min:1,max:null,step:1};return n.each(function(){var n=_getOpts($(this),i,t);e($(this),n)}),n},Fn.swipeleft=function(t){return swipe("left",$(this),t),$(this)},Fn.swiperight=function(t){return swipe("right",$(this),t),$(this)},Fn.mobileNav=function(t){var e=$(this);if(e.length){var n=e.first(),i={item:".z-nav-item,.z-nav-box",logo:"z-logo",navCls:"",menuCls:"",child:".z-dropdown-menu",toggle:!0},a=_getOpts(n,i,t),o=!0,r=n.find(a.item),s=$('<ul class="z-nav z-nav-tree z-nav-mobile"></ul>'),l="",c=$('<ul class="z-menu"><li></li><li></li><li></li></ul>'),u=a.child.replace(".",""),h=z.transTime,f=z.active;if(r.each(function(){$(this).hasClass(a.logo.replace(".",""))&&(l=$(this).clone()),$(this).children(a.child).length&&$(this).children("a").attr("href","javascript:;").removeAttr("target"),s.append($(this).addClass("z-nav-item"))}),n.html(l).append(c).addClass("z-nav-fixed-top").removeClass("z-action-mobilenav"),s.find(a.child).each(function(){$(this).removeClass(u).addClass("z-nav-child").parent().removeClass("z-dropdown")}),a.navCls&&s.addClass(a.navCls),a.toggle&&s.zdata("toggle",a.toggle),a.menuCls&&c.addClass(a.menuCls),n.after(s),c.on(_ck,function(){if(!o)return!1;o=!1;var t=$(this);s.is(":hidden")?($.createShade(function(){s.css("zIndex",z.zIndex()).show().animate({left:0},h),t.addClass(f),o=!0,t.trigger(showed)},function(){c.click()},".2"),n.css("zIndex",z.zIndex())):s.animate({left:"-100%"},h,function(){s.hide(),t.removeClass(f),t.trigger(hideed),$.closeShade(function(){o=!0})})}),isMobile)return $(d).swiperight(function(){return s.is(":hidden")?void c.click():!1}),$(d).swipeleft(function(){return s.is(":hidden")?!1:void c.click()}),e}},Fn.flyOut=function(t,e){var n=$(this),i=n.css("opacity"),a=0,o=0,r=winWidth-n.offset().left,s=0,l=13,d=t/l,c=i/d,u=Math.min(r,200)/d,h=10/d;t=t||z.transTime;var f=setInterval(function(){s+=l,i-=c,a+=u,o+=h,n.css({opacity:i,transform:"translate3d("+a+"px,0,0) skew("+o+"deg, 0deg)"}),s>=t&&(clearInterval(f),e&&e())},l);return n},Fn.lazyimg=function(t,e){function n(t,n){var l=o.scrollTop(),d=l+n,c=s?function(){return t.offset().top-o.offset().top+l}():t.offset().top;if(c>=l&&d>=c&&t.zdata("src")){var u=t.zdata("src");$.loadImg(u,function(){var n=a.eq(r);"img"===t.tagName()?t.attr("src",u):t.css("backgroundImage",'url("'+u+'")'),t.removeAttr("zdata-src"),e&&e(t),n[0]&&i(n),r++})}}function i(t,e){var i=s?(e||o).height():winHeight,l=o.scrollTop(),d=l+i;if(t)n(t,i);else for(var c=0;c<a.length;c++){var u=a.eq(c),h=s?function(){return u.offset().top-o.offset().top+l}():u.offset().top;if(n(u,i),r=c,h>d)break}}var a=$(this);if(!a.length)return a;"function"===$.type(t)&&(e=t,t=d);var o=t||d,r=0,s=o&&o!==d;return o=$(o),i(),_scroll(function(){i(null,o)},o),a},Fn.album=function(){var t=$(this),e=t.selector;return $(_b).on(_ck,e,function(n){function i(){f.css("zIndex",z.zIndex()),f.append(m),c>l.length-1&&(c=0),0>c&&(c=l.length-1);var t=l[c],e=$(t),n=e.zdata("tip")||t.title||t.alt,i=a(e);n=n?"&nbsp;&nbsp;"+n:"",$.loadImg(i,function(t){var e=winWidth>768?100:20,i=t.width,a=t.height,o=winWidth-e,s=winHeight-e,d=i,u=a;i/a>o/s?(d=Math.min(i,o),u=a*d/i,$(t).css("maxHeight","100%")):(u=Math.min(a,s),d=i*u/a,$(t).css("maxWidth","100%")),p.width(d).height(u),p.show().css({marginLeft:-d/2-2,marginTop:-u/2-2}),m.remove(),v.html(t),g.html(c+1+"/<b>"+l.length+"</b>"+n),r.trigger(showed,[r,c,f])})}function a(t){if("img"===t.tagName())var e=t[0].src;else{var e=t.css("backgroundImage").replace(/url\([\'\"]?(.*)[\'\"]?\)/,"$1").toString(),n=e.length-1;("'"===e[n]||'"'===e[n])&&(e=e.substr(0,n))}return e=t.zdata("bigsrc")||e}_prevent(n);var o=this,r=$(o),s=a(r);if(!s||r.zdata("src"))return t;var l=[],d=r.zdata("group"),c=0;if($(e+function(){return _bool(d,!0)?"":'[zdata-group="'+d+'"]'}()).each(function(){l.push(this)}),!l.length)return t;l.sort(function(t,e){var n=parseInt(_bool($(t).zdata("index"),!0)?$(t).index():$(t).zdata("index")),i=parseInt(_bool($(e).zdata("index"),!0)?$(e).index():$(e).zdata("index"));return n-i}),$.each(l,function(t,e){e===o&&(c=t)});var u=l.length>1&&!isMobile?$(z.sliderBtn):"",h=['<div class="z-album">','<span class="z-close z-action-close" zdata-box=".z-album">&times;</span>','<div class="z-album-content '+z.animCls+" "+_getAnim()+'">','<div class="z-imgbox"></div>','<div class="z-tipbox"></div>',"</div>","</div>"],f=$(h.join("")),m=$(z.loadingHtml).html("&#xe623;"),p=f.find(".z-album-content"),v=f.find(".z-imgbox"),g=f.find(".z-tipbox");p.append(u),$.createShade(function(){$(".z-album").remove(),$(_b).append(f),i()},function(){_doClose(f,null,!0,p)}),f.on(hideed,function(){r.trigger(hideed)}),l.length>1&&(isMobile?(f.swipeleft(function(t){_prevent(t,!0),++c,i()}),f.swiperight(function(t){_prevent(t,!0),--c,i()})):u&&u.on(_ck,function(){$(this).hasClass(sliderLeftCls)?--c:++c,i()})),$(w).on("keyup",function(t){var e=t.which;l.length>1&&(37==e?(--c,i()):39==e&&(++c,i())),27==e&&_doClose(f,null,!0,p)})}),t},Fn.dropdown=function(t,e){function n(t){t.addClass(r),t.trigger(showed)}function i(t,e){!e&&t.removeClass(r),t&&t.trigger(hideed)}var a=$(this),o=a.selector,r=z.active;if(t=t||_ck,e){var s=t;"hover"==s&&(s="mouseenter"),$(_b).on(s,o,function(){var t=$(this);t.hasClass(r)?i(t):(_bool(t.parent().zdata("toggle"))&&t.siblings(o).removeClass(r),n(t))}),a.find(".z-nav-child").on(_ck,function(t){t.stopPropagation()})}else"hover"==t?$(_b).on("mouseenter",o,function(){var t=$(this);n(t),t.on("mouseleave",function(){i($(this))})}):t==_ck&&$(_b).on(_ck,o,function(t){_prevent(t);var e=$(this);e.hasClass(r)?i(e):($(o).removeClass(r),n(e)),$(d).on(_ck,function(){$(o).removeClass(r),i(e,!0)})});return a},$(function(){var t=z.active;$(".z-action-code").code(),$(".z-action-datepicker").datepicker(),isMobile?$(".z-action-mobilenav").mobileNav():($(".z-action-hovercard").hovercard(),$(".z-action-tips").tips(),$(".z-action-move").move()),$(".z-action-gotop").goTop(),$(".z-action-slider").slider(),$(".z-action-anibox").aniBox(),$(".z-action-lazyimg").lazyimg(),$(".z-action-album").album(),$(".z-action-numberbox").numberBox(),$(".z-action-dropdown").dropdown(),$(".z-action-dropdown-hover").dropdown("hover"),$(".z-action-tree").dropdown(_ck,!0),$(".z-action-tree-hover").dropdown("hover",!0),$.resetForm(),$(_b).on(_ck,".z-form-radio",function(e){if(_prevent(e),!$(this).hasClass(t)){var n=$(this).zdata("id"),i=$(this).zdata("name");$('.z-form-radio[zdata-name="'+i+'"]').removeClass(t),$(this).addClass(t),$('input[type="radio"][name="'+i+'"]').each(function(){this.checked=$(this).zdata("id")===n,$(this).change()})}}),$(_b).on(_ck,".z-form-checkbox",function(e){_prevent(e);var n=$(this).zdata("id"),i=$(this);i.toggleClass(t),$('input[type="checkbox"][zdata-id="'+n+'"]').each(function(){this.checked=i.hasClass(t),$(this).change()})}),$(_b).on(_ck,".z-action-modal",function(t){_prevent(t);var e=$(this).zdata("target");e&&e.length&&$(e).length&&$(e).modal()}),$(_b).on(_ck,".z-action-close",function(t){_prevent(t);var e=$(this),n=null,i=null;$.each(zBoxs,function(t,a){var o=a.cls,r=a.ani;return e.parents(o).length?(n=e.parents(o),r&&(i=n.find(o+"-content")),!1):void 0}),n||(n=e.parents(e.zdata("box"))),i=i||n,n&&n.length&&_doClose(n,null,e.zdata("remove"),i)}),$(_b).on(_ck,".z-action-back",function(t){_prevent(t),$.back()}),$(_b).on(_ck,".z-tab-title>li",function(t){_prevent(t),tabs(this)}),$(_b).on(_ck,".z-tab-title .z-tab-close",function(e){_prevent(e);var n=$(this).parent();if(n.hasClass(t)){var i=n.next().length?n.next():n.prev();i.length&&i.click()}$(this).parents(".z-tab").find(".z-tab-content>.z-tab-item:eq("+n.index()+")").remove(),n.remove()}),$(".z-tab-title").each(function(){$(this).children("li:first").click()}),$(".z-nav.z-nav-fixed-top").length&&$(_b).css("paddingTop",$(".z-nav.z-nav-fixed-top").innerHeight()+20),$(".z-nav.z-nav-fixed-bottom").length&&$(_b).css("paddingBottom",$(".z-nav.z-nav-fixed-bottom").innerHeight()+20),$(d).on(_ck,".z-disabled,:disabled",function(t){return _prevent(t,!0),!1}),$(".z-disabled,:disabled").on(_ck,function(t){return _prevent(t,!0),!1}),$(w).on("resize",function(){z.winWidth=winWidth=$(w).innerWidth(),z.winHeight=winHeight=$(w).innerHeight()})}),z});