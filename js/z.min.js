!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:window.z=t(jQuery)}(function($,undefined){function swipe(t,e,n){var i=0,a=0,o=event,r=!1,s=null;e.on("touchstart",function(t){_prevent(t),o=t.originalEvent.touches[0],i=o.clientX,a=o.clientY,r=!0,s=setTimeout(function(){r=!1},z.transTime)}),e.on("touchend",function(e){_prevent(e),o=e.originalEvent.changedTouches[0],("left"===t?i-o.clientX:o.clientX-i)>50&&Math.abs(a-o.clientY)<50&&(n&&r&&n(e),s&&clearTimeout(s))})}function include(t,e,n){function i(){if(s<e.length){var n=e[s];if(_getZsrc(n))return void a();n.substr(-r.length)!==r&&(n+=r),-1===n.indexOf("://")&&(n=z.rootPath+n),"js"===t?(o=d.createElement("script")).src=n:"css"===t&&((o=d.createElement("link")).rel="stylesheet",o.href=n),d.head.appendChild(o),o.onload=function(){a()}}}function a(){s===e.length-1?n&&n():(s++,i())}if(e&&("string"===$.type(e)&&(e=[e]),"array"===$.type(e))){var o,r="."+t,s=0;return i(),o}}function getOpenHtml(t,e,n){for(var i=['<div class="z-modal z-move z-modal-sm '+z.animCls+" "+_getAnim()+'">','<div class="z-modal-header z-move-title z-action-move">','<button type="button" class="z-close z-action-close">&times;</button>','<h4 class="z-modal-title">'+e+"</h4>","</div>",'<div class="z-modal-body">',t,"</div>",'<div class="z-modal-footer z-text-center">'],a=0;a<n.length;a++)n[a].length&&i.push('<button type="button" class="z-btn z-btn-'+z.color[a]+'">'+n[a]+"</button>");return i.push("</div></div>"),$(i.join(""))}function getToastHtml(t,e){var n=$(".z-alert-box");e=e||z.color[3],t=t||"",n&&n.length||(n=$('<div class="z-alert-box"></div>'),$(_b).append(n)),n.css("zIndex",z.zIndex()),htmls=['<div class="z-alert z-alert-'+e+" z-alert-dismissible "+z.anims[4]+" "+z.animCls+'">','<button type="button" class="z-close z-action-close">&times;</button>',t,"</div>"];var i=$(htmls.join(""));return n.prepend(i),i.trigger(showed,i),setTimeout(function(){_doClose(i)},z.delayTime),i}function appendOpen(t,e,n){$.createShade(function(){$(_b).append(t),t.css("zIndex",z.zIndex()).show();var i=t.innerWidth(),a=t.innerHeight(),o=winWidth,r=winHeight;t.css({margin:0,top:n&&n[0]?n[0]:(r-a)/3>0?(r-a)/3:0,left:n&&n[1]?n[1]:(o-i)/2>0?(o-i)/2:0}),_modalHeight(t),t.find(".z-modal-footer .z-btn").on(_ck,function(){e&&e($(this).index())}),t.trigger(showed,t)}),$(w).on("keyup",function(e){27==e.which&&_doClose(t)})}function tabs(t){var e=z.active,n=$(t),i=n.parent().find("li"),a=n.parents(".z-tab").find(".z-tab-content>.z-tab-item"),o=n.index();n.hasClass(e)||(i.removeClass(e),n.addClass(e),a.hide().eq(o).show())}function likeObject(t){return"string"===$.type(t)&&(t=t.replace(/\s/g,"").replace(/\n|\r/,""),!!/^\{(.*?)\}$/.test(t)&&/"(.*?)":(.*?)/g.test(t))}function getBackgroundUrl(t){var e=t.css("backgroundImage").replace(/url\([\'\"]?(.*)[\'\"]?\)/,"$1").toString(),n=e.length-1;return"'"!==e[n]&&'"'!==e[n]||(e=e.substr(0,n)),e}function _getZsrc(t){for(var e=d.getElementsByTagName("script"),n=0;n<e.length;n++){var i=e[n].src;if(t){if(-1!==i.indexOf(t))return!0}else if(i.match(/[\\\/]z\.(min\.)?js/))return i.replace(/z\.(min\.)?js(\?.*)?$/,"")}return!1}function _getAnim(){var t=z.anims;return t[Math.floor(Math.random()*t.length)]}function _doClose(t,e,n,i){function a(){!t.hasClass(zBoxs[0].cls.replace(".",""))&&$.closeShade(o),t.trigger(hideed),n&&t.remove(),e&&e()}var i=i||t,o=z.closeTime;_bool(n,!0)&&(n=!0),(n=_bool(n))?i.flyOut(o,a):t.slideUp(o,a)}function _mousePosition(t){return{top:t.clientY,left:t.clientX}}function _getOpts(t,e,n){var i=e;return n&&(i=$.extend({},e,n)),$.each(i,function(e,n){_bool(t.zdata(e),!0)||(i[e]=t.zdata(e))}),i}function _bool(t,e){var n="undefined"===$.type(t);return e?n:!n&&("boolean"===$.type(t)?t:"false"!=t)}function _modalHeight(t){var e=t.children(".z-modal-header"),n=t.children(".z-modal-body"),i=t.children(".z-modal-footer");n.css("maxHeight",winHeight-e.innerHeight()-i.innerHeight()-30)}function _scroll(t,e){var n;(e=e||$(d)).on("scroll",function(){clearTimeout(n),n=setTimeout(t,60)})}function _prevent(t,e){var n=t||event;return n.stopPropagation(),e&&n.preventDefault(),n}function browser(){var t=navigator.userAgent,e=t.indexOf("Opera")>-1,n=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1&&!e,i=t.indexOf("Windows NT 6.1; Trident/7.0;")>-1&&!n,a=t.indexOf("Firefox")>-1,o=t.indexOf("Safari")>-1&&-1==t.indexOf("Chrome"),r=t.indexOf("Chrome")>-1&&t.indexOf("Safari")>-1,s=t.search(/mobile/i)>-1;return{isIE:n,isMobile:s,name:function(){if(n){new RegExp("MSIE (\\d+\\.\\d+);").test(t);var s=parseFloat(RegExp.$1);return 7==s?"IE7":8==s?"IE8":9==s?"IE9":10==s?"IE10":11==s?"IE11":"IE"}return a?"FF":e?"Opera":o?"Safari":r?"Chrome":i?"Edge":void 0}()}}var w=window,d=document,_ck="click",_b="body",winWidth=$(w).innerWidth(),winHeight=$(w).innerHeight(),transTime=200,rootPath=_getZsrc(),libsPath=rootPath.replace("js/","")+"libs/",browser=browser(),isMobile=browser.isMobile,zShade=null,zShades=0,zBoxs=[{cls:".z-alert"},{cls:".z-modal"},{cls:".z-album",ani:!0}],progressTimer=null,aniBoxTops=[],Fn=$.fn,showed="showed",hideed="hideed",z={version:"2.0.0",rootPath:rootPath,libsPath:libsPath,index:99,zIndex:function(t){return t=t||1,this.index+=t},anims:["z-anim-upbit","z-anim-scale","z-anim-scaleSpring","z-anim-up","z-anim-downbit"],animCls:"z-anim-ms3",libs:{form:libsPath+"jquery.form.min",waterfall:libsPath+"masonry-docs.min",jscrollpane:libsPath+"jquery.jscrollpane.min",datepicker:libsPath+"bootstrap-datetimepicker.min"},title:{alert:"警告框",confirm:"询问框",prompt:"输入框",open:"提示窗体"},btns:["取消","确认"],color:["default","blue","yellow","red","dark","green"],isMobile:isMobile,transTime:200,closeTime:120,successTime:1600,delayTime:4e3,active:"z-active",disabled:"z-disabled",overflow:"z-overflow",loadingHtml:'<span class="z-anim-rotate z-icon">&#xe624;</span>',sliderBtn:'<button class="z-slider-btn z-icon z-slider-prev">&#xe605;</button><button class="z-slider-btn z-icon z-slider-next">&#xe61d;</button>',winWidth:winWidth,winHeight:winHeight,browser:browser,date:{format:"M月dd日 H:mm",coverTime:864e5}},sliderLeftCls=function(){return $(z.sliderBtn)[0].className}();return $.createShade=function(t,e,n){return zShade?t&&t():(zShade=$('<div class="z-shade" style="z-index:'+z.zIndex()+";"+function(){return _bool(n)?"opacity:"+n:""}()+'"></div>'),$(_b).addClass(z.overflow),isMobile||$(_b).css("paddingRight","8px"),$(_b).append(zShade),zShade.fadeIn(z.transTime,t&&t)),++zShades,zShade.on(_ck,function(){e&&e()&&$.closeShade()}),zShade},$.closeShade=function(t,e,n){if(!zShade)return!1;zShade.trigger(hideed,zShades),n&&(zShades=0),--zShades<=0&&(zShades=0,"function"===$.type(t)&&(e=t,t=z.transTime),t=t||z.transTime,zShade.fadeOut(t,function(){zShade.remove(),$(_b).removeClass(z.overflow).css("paddingRight",""),zShade=null,e&&e()}))},$.resetForm=function(t){function e(t){t.length&&t.each(function(t){var e=this.checked,n=this.name,i=n+t.toString(),a=this.type;if(_bool($(this).zdata("noreform")))return $(this).show(),!0;if(_bool($(this).zdata("name"),!0)){var o='<div class="z-unselect z-form-'+a+function(){return e?" "+z.active:""}()+'" zdata-id="'+i+'" zdata-name="'+n+'"><i class="z-anim z-icon">'+function(){return"radio"==a?"&#xe998;":"&#xe615;"}()+"</i><span>"+this.title+"</span></div>";$(this).zdata("id",i),$(this).after(o)}})}return _bool(t,!0)?e($('.z-form input[type="radio"],.z-form input[type="checkbox"]')):(!t instanceof $&&(t=$(t)),e(t)),t},$.submit=function(ele,cb,tip){function doing(){form.find("fieldset").length||form.wrapInner("<fieldset></fieldset>");var fieldset=form.find("fieldset");if(fieldset.attr("disabled"))return!1;fieldset.attr("disabled",!0),_bool(tip)&&($(".z-msg").remove(),$(_b).append(html),html.css({marginTop:-html.innerHeight()/2,marginLeft:-html.innerWidth()/2})),form.ajaxForm(),form.ajaxSubmit({success:function(responseText,statusText,xhr,$form){if("success"==statusText){var ret=responseText;fieldset.removeAttr("disabled"),tip&&html.remove(),likeObject(ret)&&(w.JSON?ret=JSON.parse(responseText):eval("ret = "+responseText)),cb(ret)}}})}var form=ele instanceof $?ele:$(ele),datatip=form.zdata("tip"),notdatatip=_bool(datatip,!0);tip=_bool(tip,!0)&&notdatatip?"数据提交中...":notdatatip?tip:datatip;var html=$('<div class="z-msg" style="z-index:'+z.zIndex()+'">'+tip+"</div>");return!!(form&&form.length&&form.attr("action"))&&($.fn.ajaxSubmit?doing():$.loadJs(z.libs.form,doing),html)},$.date=function(t,e){function n(){var e={y:a.getFullYear(),M:a.getMonth(),d:a.getDate(),h:a.getHours(),m:a.getMinutes(),s:a.getSeconds(),ms:a.getMilliseconds(),z:a.getTimezoneOffset(),wd:a.getDay(),w:["日",o.numbers[1],"二",o.numbers[3],o.numbers[4],o.numbers[5],o.numbers[6]]},n=e.h>12?e.h-12:e.h,s={"y+":e.y,"M+":e.M+1,"d+":e.d,"H+":e.h,"h+":0==n?12:n,"m+":e.m,"s+":e.s,ms:e.ms,"a+":e.h>12||0==e.h?"PM":"AM","w+":e.wd,"W+":e.w[e.wd],"q+":Math.floor((e.m+3)/3),"z+":e.z};t===r&&e.y!==i.getFullYear()&&(t="yyyy年"+t);for(var l in s)new RegExp("("+l+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[l]:("00"+s[l]).substr((""+s[l]).length)));return t}var i=new Date,a=i,o={prefixAgo:"",suffixAgo:"后",inPast:"快到了",seconds:"小于一分钟",minute:"一分钟",minutes:"%d分钟",hour:"一小时",hours:"%d小时",day:"一天",days:"%d天",month:"一个月",months:"%d月",year:"一年",years:"%d年",wordSeparator:"",numbers:["","一","两","三","四","五","六","七","八","九","十"]};$.extend(o,z.date);var r=o.format;return"string"!==$.type(t)&&(e=t,t=r),_bool(e,!0)||(a=new Date(e)),t===r?function(){function t(t,e){var n=o.numbers&&o.numbers[e]||e;return t.replace(/%d/i,n)}var e=i.getTime()-a.getTime();if(Math.abs(e)>o.coverTime)return n();var r=o.prefixAgo,s=Math.abs(e)/1e3,l=s/60,d=l/60,c=d/24,u=c/365,h=s<45&&t(o.seconds,Math.round(s))||s<90&&t(o.minute,1)||l<45&&t(o.minutes,Math.round(l))||l<90&&t(o.hour,1)||d<24&&t(o.hours,Math.round(d))||d<42&&t(o.day,1)||c<30&&t(o.days,Math.round(c))||c<45&&t(o.month,1)||c<365&&t(o.months,Math.round(c/30))||u<1.5&&t(o.year,1)||t(o.years,Math.round(u));return e<0&&(r=o.suffixAgo),$.trim([h,r].join(o.wordSeparator))}():n()},$.getFileUrl=function(t){function e(t){var e=null;return w.createObjectURL!=undefined?e=w.createObjectURL(t):w.URL!=undefined?e=w.URL.createObjectURL(t):w.webkitURL!=undefined&&(e=w.webkitURL.createObjectURL(t)),e}var n=[],i=t.files;if(i&&i.length)return $.each(i,function(t,i){n.push(e(i))}),n.length>1?n:n[0]},$.supportCss3=function(t){var e,n=["webkit","Moz","ms","o"],i=[],a=d.documentElement.style,o=function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})};t=t||"animation";for(e in n)i.push(o(n[e]+"-"+t));i.push(o(t));for(e in i)if(i[e]in a)return!0;return!1},$.loadImg=function(t,e,n){var i=new Image;return i.src=t,i.complete?(e(i),i):(i.onload=function(){i.onload=null,e(i)},i.onerror=function(t){i.onerror=null,n&&n(t)},i)},$.flow=function(t,e,n){function i(){o=!0,s.button("loading"),e(++u,c)}("string"===$.type(t)||!t instanceof $)&&(t=$(t));var a={scrollElem:d,isAuto:!0,endTxt:"没有更多了",eleTxt:"加载更多",loadingTxt:"加载中..."};n=$.extend({},a,n);var o,r,s=$('<button type="button" class="z-btn z-block" zdata-loading-text="'+n.loadingTxt+'">'+n.eleTxt+"</button>"),l=s.clone().addClass("z-btn-link"),c=$('<div class="z-wrap"></div>'),u=1,h=n.scrollElem&&n.scrollElem!==d,f=$(n.scrollElem),m={reset:function(){u=1,o=null,r=!1,s.html(n.eleTxt).button("reset")},refresh:function(){this.reset(),t.prepend(l),l.button("loading"),s.hide(),o=!0,e(u,c)},disabled:function(){o=!0,s.addClass(z.disabled)},done:function(t){o=null,s.show(),t?(r=t,s.html(n.endTxt).addClass(z.disabled)):s.button("reset"),l.remove()}};return t.wrapInner(c).append(s),c=t.children("div.z-wrap"),s.on(_ck,function(){r||o||i()}),n.isAuto?(_scroll(function(){if(r)return m;var t=f,e=t.scrollTop(),n=h?t.innerHeight():winHeight;(h?t.prop("scrollHeight"):d.documentElement.scrollHeight)-e-n<=0&&(o||i())},f),m):m},$.progressBar=function(t,e){var n=0,i=10,a=0,o=(e=$(_bool(e,!0)?_b:e)).find(".z-progress-fix");if(("start"!=t||!o.length)&&("done"!=t||o.length))return o.length?(o.css("opacity",0).width("100%"),setTimeout(function(){o.remove(),clearInterval(progressTimer)},300)):(o=$('<div class="z-progress-fix"></div>'),e.append(o),progressTimer=setInterval(function(){n+=i,++a,o.width(n+"%"),99===n&&(i/=10),a>=9&&(a=0,i/=10)},300)),o},$.open=function(t,e,n,i,a,o){var r,s=!0,l={},d=arguments;return $.each(d,function(t,e){"array"===$.type(e)?s?(s=!1,l.btns=e,"string"===$.type(d[t+1])&&(l.width=d[t+1])):l.offset=e:"function"===$.type(e)&&(o=e)}),t="string"===$.type(t)?t:"",e="string"===$.type(e)?e:z.title.open,n=l.btns?l.btns:z.btns,i="string"===$.type(i)?i:l.width?l.width:null,a=l.offset?l.offset:null,(r=getOpenHtml(t,e,n)).removeClass("z-modal-sm"),i&&r.width(i),appendOpen(r,function(t){(o&&!o(t)||!o)&&_doClose(r)},a),r},$.alert=function(t,e,n){var i,a;return t=t||"",e=e||z.title.alert,i=n?["",n]:["",z.btns[1]],a=getOpenHtml(t,e,i),appendOpen(a,function(){_doClose(a)}),a},$.confirm=function(t,e,n,i){var a,o={};return $.each(arguments,function(t,e){"array"===$.type(e)?o.btns=e:"function"===$.type(e)&&(i=e)}),t="string"===$.type(t)?t:"",e="string"===$.type(e)?e:z.title.confirm,n=o.btns?o.btns:z.btns,a=getOpenHtml(t,e,n),appendOpen(a,function(t){i&&t>0&&i(t),_doClose(a)}),a},$.prompt=function(t,e,n,i){var a,o,r={};return $.each(arguments,function(t,e){"array"===$.type(e)?r.btns=e:"function"===$.type(e)&&(i=e)}),t="string"===$.type(t)?t:z.title.prompt,e="string"===$.type(e)?e:t,n=r.btns?r.btns:z.btns,o='<input type="text" autofocus class="z-input" placeholder="'+e+'" />',a=getOpenHtml(o,t,n),appendOpen(a,function(t){i&&t>0&&i(a.find(".z-input").val()),_doClose(a)}),a},$.toast=function(t,e){return getToastHtml(t,e)},$.success=function(t,e){return e&&function(){var t=$('<div class="z-shade" style="z-index:'+z.zIndex()+';opacity:0;display:block;"></div>');$(_b).append(t),setTimeout(function(){e(),t.remove()},z.successTime)}(),getToastHtml(t,z.color[5])},$.msg=function(t){$(".z-msg").remove();var e=$('<div class="z-msg '+z.anims[2]+" "+z.animCls+'" style="z-index:'+z.zIndex()+'">'+t+"</div>");return $(_b).append(e),e.css({marginTop:-e.innerHeight()/2,marginLeft:-e.innerWidth()/2}),setTimeout(function(){e.hide(z.closeTime,function(){e.trigger(hideed),e.remove()})},z.delayTime),e.trigger(showed,e),e},$.loadJs=function(t,e){return include("js",t,e)},$.loadCss=function(t,e){return include("css",t,e)},$.back=function(){w.history.go(-1)},$.viewModel=function(t){function e(){$.each(a.concat(o),function(e,n){var i="z-"+n,l=$("["+i+"]");l.length&&l.each(function(){var e=$(this),l=e.attr(i),d={ele:e,eve:n,tar:l};if(-1!==$.inArray(d,r)||-1!==$.inArray(d,s))return!0;e.removeAttr(i),-1!==$.inArray(n,a)?(r.push(d),e.on(n,t[l])):-1!==$.inArray(n,o)&&(s.push(d),e.on(n,function(){var i=t[l];likeObject(i)&&(i=JSON.parse(i)),"visible"==n?_bool(i)?e.show():e.hide():e[n](i)}),_bool(t[l],!0)||e.trigger(n))})})}function n(e,n,a){return t[e]=n,$.each(s,function(t,n){n.tar==e&&n.ele.trigger(n.eve)}),_bool(a)&&i._put(),i}var i=t,a=["animationend","blur","change","input","click","dblclick","focus","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","scroll","submit"],o=["attr","className","css","text","html","addClass","addAttr","addData","removeClass","removeAttr","removeData","visible"],r=[],s=[];return e(),i.$events=r,i.$attrs=s,i._put=e,i._set=n,i},$.checkAll=function(t,e){function n(t,e){t.each(function(){var t=$(this).zdata("id");if(this.checked=e,!_bool(t,!0)){var n=$('.z-form-checkbox[zdata-id="'+t+'"]');e?n.addClass(z.active):n.removeClass(z.active)}})}if(t.length&&e.length&&"checkbox"===t[0].type&&"checkbox"===e[0].type){t.on("change",function(){var i=this.checked;n(t,i),n(e,i)}),e.on("change",function(){var i=this.checked;if(i){var a=0;e.each(function(t,e){if(!e.checked)return!0;++a}),e.length===a&&n(t,i)}else n(t,i)})}},$.likeObject=likeObject,$.getBackgroundUrl=getBackgroundUrl,Fn.tagName=function(){return this[0].tagName.toLowerCase()},Fn.className=function(t){return _bool(t,!0)?this.className:($(this).each(function(){this.className=t}),$(this))},Fn.zdata=function(t,e){return _bool(e,!0)?$(this).attr("zdata-"+t):($(this).attr("zdata-"+t,e),$(this))},Fn.button=function(t){var e=$(this),n=z.disabled;if(!e.length)return e;var i=null;if(i=e.hasClass(n)?"reset":"loading","loading"===(t=t||i)){if(e.hasClass(n))return!1;a=e.zdata("loading-text")||"loading";a=z.loadingHtml+"  "+a,e.attr("disabled","true").addClass(n).attr("zdata-old-text",e.html()).html(a)}else if("reset"===t){if(!e.hasClass(n))return!1;var a=e.zdata("old-text")||"resetBtn";e.removeAttr("disabled").removeAttr("zdata-old-text").removeClass(n).html(a)}return e},Fn.modal=function(t){var e=$(this);if(!e.length)return e;if(!e.hasClass("z-modal"))return e;var n=e.is(":hidden");return"show"!==t||n?"hide"===t&&n?e:(n?$.createShade(function(){e.css("zIndex",z.zIndex()).show().css({left:"50%",marginLeft:-e.innerWidth()/2}).addClass(z.anims[4]+" "+z.animCls),_modalHeight(e),e.trigger(showed,e)},function(){_doClose(e,null,!1)}):_doClose(e,null,!1),e):e},Fn.tips=function(t){var e=$(this),n={bgColor:"black",txtColor:"white",autoDie:!0},i=e.selector,a=null;return t=$.extend({},n,t),$(_b).on("mouseenter",i,function(e){var n=this.title,i=$(this).zdata("title"),o=$(this);if(_prevent(e),n||i){n&&($(this).zdata("title",n),$(this).removeAttr("title")),t=_getOpts(o,t);var r=this.offsetWidth,s=o.offset(),l=o.zdata("title"),c="",u=['<div class="z-tipsbox '+z.anims[1]+" "+z.animCls+'" style="z-index:'+z.zIndex()+";top:"+(s.top-40)+"px;left:"+function(){var t=s.left;return r<17&&(t-=17),t<0&&(t=0),t}()+'px">','<div class="z-tipsbox-content"'+function(){var e='style="';return"black"!==t.bgColor&&(e+="background-color: "+t.bgColor+";"),"white"!==t.txtColor&&(e+="color: "+t.txtColor+";"),e+='"'}()+">",l,'</div><i style="border-right-color:'+t.bgColor+'"></i>',"</div>"];c=$(u.join("")),$(".z-tipsbox").remove(),$(_b).append(c);var h=s.top-c.innerHeight()-10;h-$(d).scrollTop()<0?c.css("top",s.top+o.innerHeight()+10).find("i").css({top:"-8px",bottom:"auto"}):c.css("top",h),_bool(t.autoDie)&&(a&&clearTimeout(a),a=setTimeout(function(){c.remove()},5e3)),o.on("mouseleave",function(){a&&clearTimeout(a),$(".z-tipsbox").remove()})}}),e},Fn.move=function(t){var e=$(this),n={box:".z-move",top:0,right:0,bottom:0,left:0},i=e.selector,a=!1,o=0,r=0,s=0,l=0,c=winWidth,u=winHeight,h=null;return t=_getOpts(e,n,t),$(w).on("mousemove",function(e){if(a&&h){var n=_mousePosition(_prevent(e,!0)),i=n.left-r,d=n.top-o;d<t.top&&(d=t.top),i<t.left&&(i=t.left),d>u-l-t.bottom&&(d=u-l-t.bottom),i>c-s-t.right&&(i=c-s-t.right),h.css({left:i,top:d})}}),$(_b).on("mousedown",i,function(e){a=!0;var n=_prevent(e,!0),i=(h=$(this).parents(t.box)).offset(),f=_mousePosition(n);s=h.innerWidth(),l=h.innerHeight(),o=f.top-(i.top-$(d).scrollTop()),r=f.left-(i.left-$(d).scrollLeft()),h.css("zIndex",z.zIndex()),c=winWidth,u=winHeight}),$(_b).on("mouseup",i,function(){a=!1,h=null}),e},Fn.slider=function(t){function e(t,e){function n(t){l=!1,"left"===(t=t||"left")?(Math.abs(h)<=i&&(h=-(r-1)*i,u.css(f,h)),h+=i):"right"===t?(Math.abs(h)>=(r-2)*i&&(h=0,u.css(f,h)),h-=i):h=t,u.animate({marginLeft:h},e.speed,function(){d=parseInt((Math.abs(h)-i)/i),c&&c.removeClass(p).eq(d).addClass(p),e.complete&&e.complete(a.eq(d+1)),l=!0})}e=_getOpts(t,e);var i=t.innerWidth(),a=t.find(e.item),o=t.find(e.items),r=a.length,s=null,l=!0,d=0,c=null,u=null,h=-i,f="marginLeft",m=r>1&&!isMobile?$(z.sliderBtn):"",p=z.active;if(!(r<1)){if(_bool(e.dots)&&(t.append('<div class="z-dots">'+function(){for(var t="",e=0;e<r;e++)t+=0===e?'<a href="javascript:;" class="'+p+'"></a>':'<a href="javascript:;"></a>';return t}()+"</div>"),c=t.find(".z-dots>a"),_bool(e.keys)&&c.on(_ck,function(){n(-($(this).index()+1)*i)})),t.width(i).append(m),r>1){var g=a.eq(0).clone(),v=a.eq(r-1).clone();o.prepend(v),o.append(g),a=t.find(e.item),r=a.length,o.wrap("<div></div>"),(u=o.parent()).css(f,h)}if(a.width(i),o.height(a.innerHeight()).width(r*i),s=setInterval(n,e.delay),isMobile){var b=null,w=0,x="left",_=0;t.on("touchmove",function(t){_prevent(t),_=b.clientX-w,b=t.originalEvent.changedTouches[0],u.css(f,h+_)}),t.on("touchstart",function(t){_prevent(t),b=t.originalEvent.touches[0],w=b.clientX,clearInterval(s)}),t.on("touchend",function(t){_prevent(t),b=t.originalEvent.changedTouches[0],n(x=b.clientX-w>0?"left":"right"),s=setInterval(n,e.delay)})}else t.on("mouseenter",function(){clearInterval(s)}),t.on("mouseleave",function(){s=setInterval(n,e.delay)}),m.on(_ck,function(){clearInterval(s),l&&n($(this).hasClass(sliderLeftCls)?"left":"right")})}}var n=$(this);if(!n.length)return n;var i={speed:500,delay:5e3,complete:null,keys:!0,dots:!0,items:"ul,.ul",item:"li,.li"};return n.each(function(){e($(this),_getOpts($(this),i,t))}),n},Fn.waterfall=function(t){function e(){_getOpts(n,{itemSelector:".z-waterfall-item",gutter:0,isAnimated:!0},t);n.css("opacity",0).imagesLoaded(function(){n.masonry(t),n.css("opacity",1)})}var n=$(this);return n.length?(Fn.masonry?e():$.loadJs(z.libs.waterfall,e),n):n},Fn.datepicker=function(t){function e(){var e=_getOpts(n,{minView:"month",format:"yyyy-mm-dd",autoclose:!0},t);n.datetimepicker(e)}var n=$(this),i=z.libs.datepicker;return n.length?(Fn.datetimepicker?e():$.loadCss(i,function(){$.loadJs(i,e)}),n):n},Fn.hovercard=function(){function t(){var t,a,o,r=n.offset(),s=n.innerWidth(),l=n.innerHeight(),c=e.innerWidth(),u=e.innerHeight(),h=$(d).scrollTop(),f=$(d).scrollLeft();winHeight-(r.top-h+l+u+10)>=0?(t=r.top+l+10,a=r.left,o=""):r.top-h-(u+10)>=0?(t=r.top-u-10,a=r.left,o="z-dropdown-menu-bottom"):r.left-f-(c+10)>=0?(t=r.top,a=r.left-c-10,o="z-dropdown-menu-right z-dropdown-menu-child"):(t=r.top,a=r.left+s+10,o="z-dropdown-menu-child"),e.show().className(i+o).css({top:t,left:a,bottom:"auto",right:"auto",zIndex:z.zIndex()})}var e,n,i,a,o=$(this).selector;$(_b).on("mouseenter",o,function(o){var r=$(this),s='<div class="z-loadingbox">'+z.loadingHtml+"</div>",l=!1,d=z.transTime;_prevent(o),clearTimeout(a),a=setTimeout(function(){e=$(".z-hovercard"),n=r,(r.zdata("html")||r.zdata("url"))&&(e.length||(e=$(['<div class="'+(i="z-dropdown-menu z-hovercard ")+'">',s,"</div>"].join("")),$(_b).append(e)),r.zdata("html")?(e.html(r.zdata("html")),t()):r.zdata("url")&&(e.html(s),t(),$.get(r.zdata("url"),function(n){e.html(n),t()})),e&&(r.trigger(showed,e),e.off("mouseenter").on("mouseenter",function(){l=!0}),e.off("mouseleave").on("mouseleave",function(){clearTimeout(a),e.fadeOut(d,function(){r.trigger(hideed)})})))},800),r.off("mouseleave").on("mouseleave",function(){clearTimeout(a),setTimeout(function(){!l&&e&&e.fadeOut(d,function(){r.trigger(hideed)})},400)})})},Fn.goTop=function(t){var e=$(this);if(!e.length)return e;var n={top:100,time:z.transTime},i=e,a=_getOpts(i,n,t);return _scroll(function(){$(d).scrollTop()>a.top?i.addClass("z-on"):i.removeClass("z-on")}),i.on(_ck,function(t){_prevent(t,!0),$("body,html").animate({scrollTop:0},a.time)}),i},Fn.code=function(t){var e=$(this);return e.length?(e.each(function(){var e=t||{},n=$(this),i=n.html();n.zdata;n.zdata("title")&&(e.title=n.zdata("title")),n.zdata("skin")&&(e.skin=n.zdata("skin")),n.zdata("encode")&&(e.encode=n.zdata("encode")),n.zdata("about-text")&&n.zdata("about-link")&&(e.about='<a href="'+n.zdata("about-link")+' target="_blank>'+n.zdata("about-text")+"</a>"),e.encode&&(i=i.replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")),n.html('<ol class="z-code-ol"><li>'+i.replace(/[\r\t\n]+/g,"</li><li>")+"</li></ol>"),n.find(">.z-code-h3")[0]||!e.title&&!e.about||n.prepend('<h3 class="z-code-h3">'+(e.title||"code")+(e.about||"")+"</h3>");var a=n.find(">.z-code-ol");n.addClass("z-code-view"),e.skin&&n.addClass("z-code-"+e.skin),(a.find("li").length/100|0)>0&&a.css("margin-left",(a.find("li").length/100|0)+"px"),n.find("li").each(function(){$(this).html("<span>"+$(this).html()+"</span>")})}),e):e},Fn.aniBox=function(t){function e(){if(!a){var t=$(d).scrollTop();if(t<=o){var e=[];if(n.each(function(){var n=$(this);n.zdata("aniName")&&parseInt(n.zdata("top"))<=t+winHeight&&e.push(n)}),e.length)var i=0,r=setInterval(function(){if(i>=e.length)return void clearInterval(r);var t=e[i];t.zdata("aniTime")&&(t.addClass(t.zdata("aniName")).addClass("z-anim-ms"+parseInt(t.zdata("aniTime"))/100).removeAttr("zdata-top").removeAttr("zdata-aniName").removeAttr("zdata-aniTime").animate({opacity:1},z.transTime),++i)},100)}else n.css("opacity",1),a=!0}}var n=$(this);if(!n.length)return n;var i={aniName:z.anims[0],aniTime:500},a=!1;t=$.extend({},i,t),n.each(function(){var e=$(this).offset().top;aniBoxTops.push(e),$(this).css("opacity",0).zdata("top",e),$(this).zdata("aniName")||$(this).zdata("aniName",t.aniName?t.aniName:_getAnim()),$(this).zdata("aniTime")||$(this).zdata("aniTime",t.aniTime)});var o=Math.max.apply({},aniBoxTops);return o=Math.min(o,$(d).innerHeight()-winHeight),e(),$(w).on("scroll",e),n},Fn.numberBox=function(t){function e(t,e){var n=t.find(e.input),i=t.find(e.next),a=t.find(e.prev),o=parseFloat(e.step),r=parseFloat(e.max),s=parseFloat(e.min),l=z.disabled;n&&i&&a&&n.length&&i.length&&a.length&&(r&&r<s||(n.off("change").on("change",function(){var t=parseFloat($(this).val());isNaN(t)&&(t=s),t<=s?($(this).val(s),a.addClass(l)):a.removeClass(l),r&&t>=parseFloat(r)?($(this).val(r),i.addClass(l)):i.removeClass(l)}),i.off(_ck).on(_ck,function(){var t=parseFloat(n.val());$(this).hasClass(l)||(t+=o,n.val(t).change())}),a.off(_ck).on(_ck,function(){var t=parseFloat(n.val());$(this).hasClass(l)||(t-=o,n.val(t).change())}),n.change()))}var n=$(this);if(!n.length)return n;var i={prev:".z-btn.z-sub",next:".z-btn.z-add",input:"input",min:1,max:null,step:1};return n.each(function(){var n=_getOpts($(this),i,t);e($(this),n)}),n},Fn.swipeleft=function(t){return swipe("left",$(this),t),$(this)},Fn.swiperight=function(t){return swipe("right",$(this),t),$(this)},Fn.mobileNav=function(t){var e=$(this);if(e.length){var n=e.first(),i=_getOpts(n,{item:".z-nav-item,.z-nav-box",logo:"z-logo",navCls:"",menuCls:"",child:".z-dropdown-menu",toggle:!0,margin:20},t),a=!0,o=n.find(i.item),r=$('<ul class="z-nav z-nav-tree z-nav-mobile"></ul>'),s="",l=$('<ul class="z-menu"><li></li><li></li><li></li></ul>'),c=i.child.replace(".",""),u=z.transTime,h=z.active;if(o.each(function(){$(this).hasClass(i.logo.replace(".",""))&&(s=$(this).clone()),$(this).children(i.child).length&&$(this).children("a").attr("href","javascript:;").removeAttr("target"),r.append($(this).addClass("z-nav-item"))}),n.html(s).append(l).addClass("z-nav-fixed-top").removeClass("z-action-mobilenav"),r.find(i.child).each(function(){$(this).removeClass(c).addClass("z-nav-child").parent().removeClass("z-dropdown")}),i.navCls&&r.addClass(i.navCls),i.toggle&&r.zdata("toggle",i.toggle),i.margin&&r.zdata("margin",i.margin),i.menuCls&&l.addClass(i.menuCls),n.after(r),l.on(_ck,function(){if(!a)return!1;a=!1;var t=$(this);r.is(":hidden")?($.createShade(function(){r.css("zIndex",z.zIndex()).show().animate({left:0},u),t.addClass(h),a=!0,t.trigger(showed)},function(){l.click()},".2"),n.css("zIndex",z.zIndex())):r.animate({left:"-100%"},u,function(){r.hide(),t.removeClass(h),t.trigger(hideed),$.closeShade(function(){a=!0})})}),isMobile)return $(d).swiperight(function(){if(!r.is(":hidden"))return!1;l.click()}),$(d).swipeleft(function(){if(r.is(":hidden"))return!1;l.click()}),e}},Fn.flyOut=function(t,e){var n=$(this),i=n.css("opacity"),a=0,o=0,r=winWidth-n.offset().left,s=0,l=t/13,d=i/l,c=Math.min(r,200)/l,u=10/l;t=t||z.transTime;var h=setInterval(function(){s+=13,i-=d,a+=c,o+=u,n.css({opacity:i,transform:"translate3d("+a+"px,0,0) skew("+o+"deg, 0deg)"}),s>=t&&(clearInterval(h),e&&e())},13);return n},Fn.lazyimg=function(t,e){function n(t,n){var l=o.scrollTop(),d=l+n,c=s?function(){return t.offset().top-o.offset().top+l}():t.offset().top;if(c>=l&&c<=d&&t.zdata("src")){var u=t.zdata("src");$.loadImg(u,function(){var n=a.eq(r);"img"===t.tagName()?t.attr("src",u):t.css("backgroundImage",'url("'+u+'")'),t.removeAttr("zdata-src"),e&&e(t),n[0]&&i(n),r++})}}function i(t,e){var i=s?(e||o).height():winHeight,l=o.scrollTop(),d=l+i;if(t)n(t,i);else for(var c=0;c<a.length;c++){var u=a.eq(c),h=s?function(){return u.offset().top-o.offset().top+l}():u.offset().top;if(n(u,i),r=c,h>d)break}}var a=$(this);if(!a.length)return a;"function"===$.type(t)&&(e=t,t=d);var o=t||d,r=0,s=o&&o!==d;return o=$(o),i(),_scroll(function(){i(null,o)},o),a},Fn.album=function(){var t=$(this),e=t.selector;return $(_b).on(_ck,e,function(n){function i(){h.css("zIndex",z.zIndex(6)),h.append(f),d>s.length-1&&(d=0),d<0&&(d=s.length-1);var t=s[d],e=$(t),n=e.zdata("tip")||t.title||t.alt,i=a(e);n=n?"&nbsp;&nbsp;"+n:"",$.loadImg(i,function(t){var e=winWidth>768?100:20,i=t.width,a=t.height,o=winWidth-e,l=winHeight-e,c=i,u=a;i/a>o/l?(u=a*(c=Math.min(i,o))/i,$(t).css("maxHeight","100%")):(c=i*(u=Math.min(a,l))/a,$(t).css("maxWidth","100%")),m.width(c).height(u),m.show().css({marginLeft:-c/2-2,marginTop:-u/2-2}),f.remove(),p.html(t),g.html(d+1+"/<b>"+s.length+"</b>"+n),r.trigger(showed,[r,d,h])})}function a(t){return t.zdata("bigsrc")?t.zdata("bigsrc"):"img"===t.tagName()?t[0].src:getBackgroundUrl(t)}_prevent(n);var o=this,r=$(o);if(!a(r)||r.zdata("src"))return t;var s=[],l=r.zdata("group"),d=0;if($(e+function(){return _bool(l,!0)?"":'[zdata-group="'+l+'"]'}()).each(function(){s.push(this)}),!s.length)return t;s.sort(function(t,e){return(_bool($(t).zdata("index"),!0)?parseInt($(t).index()):parseInt($(t).zdata("index")))-(_bool($(e).zdata("index"),!0)?parseInt($(e).index()):parseInt($(e).zdata("index")))}),$.each(s,function(t,e){e===o&&(d=t)});var c=s.length>1&&!isMobile?$(z.sliderBtn):"",u=['<div class="z-album">','<span class="z-close z-action-close" zdata-box=".z-album">&times;</span>','<div class="z-album-content '+z.animCls+" "+_getAnim()+'">','<div class="z-imgbox"></div>','<div class="z-tipbox"></div>',"</div>","</div>"],h=$(u.join("")),f=$(z.loadingHtml).html("&#xe623;"),m=h.find(".z-album-content"),p=h.find(".z-imgbox"),g=h.find(".z-tipbox");m.append(c),$.createShade(function(){$(".z-album").remove(),$(_b).append(h),i()},function(){_doClose(h,null,!0,m)}),h.on(hideed,function(){r.trigger(hideed)}),s.length>1&&(isMobile?(h.swipeleft(function(t){_prevent(t,!0),++d,i()}),h.swiperight(function(t){_prevent(t,!0),--d,i()})):c&&c.on(_ck,function(){$(this).hasClass(sliderLeftCls)?--d:++d,i()})),$(w).on("keyup",function(t){var e=t.which;s.length>1&&(37==e?(--d,i()):39==e&&(++d,i())),27==e&&_doClose(h,null,!0,m)})}),t},Fn.dropdown=function(t,e){function n(t){t.addClass(r),t.trigger(showed,t)}function i(t,e){!e&&t.removeClass(r),t&&t.trigger(hideed)}var a=$(this),o=a.selector,r=z.active;if(t=t||_ck,e){var s=t;"hover"==s&&(s="mouseenter"),$(_b).on(s,o,function(t){var e=$(this);e.hasClass(r)?i(e):(_bool(e.parent().zdata("toggle"))&&e.siblings(o).removeClass(r),n(e))}),a.find(".z-nav-child").on(_ck,function(t){t.stopPropagation()})}else"hover"==t?$(_b).on("mouseenter",o,function(){var t=$(this);n(t),t.on("mouseleave",function(){i($(this))})}):t==_ck&&$(_b).on(_ck,o,function(t){_prevent(t);var e=$(this);e.hasClass(r)?i(e):($(o).removeClass(r),n(e)),$(d).on(_ck,function(){$(o).removeClass(r),i(e,!0)})});return a},Fn.sendForm=function(t,e){e||(e=t,t=null);var n=$(this);return n.on("submit",function(){if(t&&0==t.call(this))return!1;var i=$.submit(this,function(t){e(t)});return n.trigger("showed",i),!1}),n},Fn.imagePosition=function(){return $(this).each(function(){var t=$(this),e=this.src;if("img"!==t.tagName())return!1;if(!e)return!1;var n=t.parent(),i=n.innerWidth(),a=n.innerHeight();n.css({overflow:"hidden",position:"relative"}),$.loadImg(e,function(e){var n=e.width,o=e.height;t.css({position:"absolute",display:"block"}),n/o>i/a?t.css({height:"100%",left:-(a*n/o-i)/2,top:0,width:"auto"}):t.css({width:"100%",top:-(i*o/n-a)/2,left:0,height:"auto"})})}),$(this)},$(function(){var t=z.active;$(".z-action-code").code(),$(".z-action-datepicker").datepicker(),isMobile?$(".z-action-mobilenav").mobileNav():($(".z-action-hovercard").hovercard(),$(".z-action-tips").tips(),$(".z-action-move").move()),$(".z-action-gotop").goTop(),$(".z-action-slider").slider(),$(".z-action-anibox").aniBox(),$(".z-action-lazyimg").lazyimg(),$(".z-action-album").album(),$(".z-action-numberbox").numberBox(),$(".z-action-dropdown").dropdown(),$(".z-action-dropdown-hover").dropdown("hover"),$(".z-action-tree").dropdown(_ck,!0),$(".z-action-tree-hover").dropdown("hover",!0),$.resetForm(),$(_b).addClass("browser-"+browser.name),$.supportCss3("backgroundSize")||($(".z-cover").each(function(){var t=$(this),e=$.getBackgroundUrl(t);t.children("*").length&&t.wrapInner('<div style="position:relative;z-index:2;height:100%"></div>'),t.append('<img src="'+e+'" />').css("backgroundImage","")}),$(".z-cover > img").imagePosition()),$(_b).on(_ck,".z-form-radio",function(e){if(_prevent(e),!$(this).hasClass(t)){var n=$(this).zdata("id"),i=$(this).zdata("name");$('.z-form-radio[zdata-name="'+i+'"]').removeClass(t),$(this).addClass(t),$('input[type="radio"][name="'+i+'"]').each(function(){this.checked=$(this).zdata("id")===n,$(this).change()})}}),$(_b).on(_ck,".z-form-checkbox",function(e){_prevent(e);var n=$(this).zdata("id"),i=$(this);i.toggleClass(t),$('input[type="checkbox"][zdata-id="'+n+'"]').each(function(){this.checked=i.hasClass(t),$(this).change()})}),$(_b).on(_ck,".z-action-modal",function(t){_prevent(t);var e=$(this).zdata("target");e&&e.length&&$(e).length&&$(e).modal()}),$(_b).on(_ck,".z-action-close",function(t){_prevent(t);var e=$(this),n=null,i=null;$.each(zBoxs,function(t,a){var o=a.cls,r=a.ani;if(e.parents(o).length)return n=e.parents(o),r&&(i=n.find(o+"-content")),!1}),n||(n=e.parents(e.zdata("box"))),i=i||n,n&&n.length&&_doClose(n,null,e.zdata("remove"),i)}),$(_b).on(_ck,".z-action-back",function(t){_prevent(t),$.back()}),$(_b).on(_ck,".z-tab-title>li",function(t){_prevent(t),tabs(this)}),$(_b).on(_ck,".z-tab-title .z-tab-close",function(e){_prevent(e);var n=$(this).parent();if(n.hasClass(t)){var i=n.next().length?n.next():n.prev();i.length&&i.click()}$(this).parents(".z-tab").find(".z-tab-content>.z-tab-item:eq("+n.index()+")").remove(),n.remove()}),$(".z-tab-title").each(function(){$(this).children("li:first").click()});var e=$(".z-nav.z-nav-fixed-top"),n=$(".z-nav.z-nav-fixed-bottom");e.length&&$(_b).css("paddingTop",e.innerHeight()+parseFloat(e.zdata("margin")||20)),n.length&&$(_b).css("paddingBottom",n.innerHeight()+parseFloat(n.zdata("margin")||20)),$(d).on(_ck,".z-disabled,:disabled",function(t){return _prevent(t,!0),!1}),$(".z-disabled,:disabled").on(_ck,function(t){return _prevent(t,!0),!1}),$(w).on("resize",function(){z.winWidth=winWidth=$(w).innerWidth(),z.winHeight=winHeight=$(w).innerHeight()})}),z});